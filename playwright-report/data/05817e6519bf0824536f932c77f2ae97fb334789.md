# Test info

- Name: planner tag filters
- Location: /Users/michaelmcisaac/GitHub/teaching-engine2.0/tests/e2e/planner-filters.spec.ts:4:5

# Error details

```
TimeoutError: page.waitForSelector: Timeout 10000ms exceeded.
Call log:
  - waiting for locator('.planner-grid') to be visible

    at /Users/michaelmcisaac/GitHub/teaching-engine2.0/tests/e2e/planner-filters.spec.ts:32:14
```

# Page snapshot

```yaml
- img
- heading "Something went wrong" [level=1]
- paragraph: We're sorry, but something unexpected happened. Please refresh the page and try again.
- button "Refresh Page"
- group: Error Details (Development)
- region "Notifications alt+T"
```

# Test source

```ts
   1 | import { test, expect } from '@playwright/test';
   2 | import { login, API_BASE } from './helpers';
   3 |
   4 | test('planner tag filters', async ({ page }) => {
   5 |   const ts = Date.now();
   6 |   const token = await login(page);
   7 |   const subjectRes = await page.request.post(`${API_BASE}/api/subjects`, {
   8 |     headers: { Authorization: `Bearer ${token}` },
   9 |     data: { name: `F${ts}` },
  10 |   });
  11 |   const subjectId = (await subjectRes.json()).id as number;
  12 |
  13 |   const milestoneRes = await page.request.post(`${API_BASE}/api/milestones`, {
  14 |     headers: { Authorization: `Bearer ${token}` },
  15 |     data: { title: `M${ts}`, subjectId },
  16 |   });
  17 |   const milestoneId = (await milestoneRes.json()).id as number;
  18 |
  19 |   await page.goto(`/milestones/${milestoneId}`);
  20 |
  21 |   // create activities via API with tags
  22 |   await page.request.post(`${API_BASE}/api/activities`, {
  23 |     headers: { Authorization: `Bearer ${token}` },
  24 |     data: { title: 'WorksheetAct', milestoneId, tags: ['Worksheet'] },
  25 |   });
  26 |   await page.request.post(`${API_BASE}/api/activities`, {
  27 |     headers: { Authorization: `Bearer ${token}` },
  28 |     data: { title: 'VideoAct', milestoneId, tags: ['Video'] },
  29 |   });
  30 |
  31 |   await page.goto('/planner');
> 32 |   await page.waitForSelector('.planner-grid', { timeout: 10000 });
     |              ^ TimeoutError: page.waitForSelector: Timeout 10000ms exceeded.
  33 |   await page.waitForResponse((r) => r.url().includes('/api/calendar-events') && r.status() === 200);
  34 |   await page.uncheck('label:has-text("HandsOn") input');
  35 |   await page.uncheck('label:has-text("Video") input');
  36 |   await page.check('label:has-text("Worksheet") input');
  37 |   await expect(page.locator('text=WorksheetAct').first()).toBeVisible();
  38 |   await expect(page.locator('text=VideoAct')).toHaveCount(0);
  39 | });
  40 |
```
