# Test info

- Name: filters notes by subject and type
- Location: /Users/michaelmcisaac/GitHub/teaching-engine2.0/tests/e2e/reflections-filter.spec.ts:4:5

# Error details

```
TimeoutError: page.selectOption: Timeout 10000ms exceeded.
Call log:
  - waiting for locator('select')

    at /Users/michaelmcisaac/GitHub/teaching-engine2.0/tests/e2e/reflections-filter.spec.ts:75:14
```

# Test source

```ts
   1 | import { test, expect } from '@playwright/test';
   2 | import { login, API_BASE } from './helpers';
   3 |
   4 | test('filters notes by subject and type', async ({ page }) => {
   5 |   const ts = Date.now();
   6 |   const token = await login(page);
   7 |   await page.request.post(`${API_BASE}/api/subjects`, {
   8 |     headers: { Authorization: `Bearer ${token}` },
   9 |     data: { name: `Math${ts}` },
  10 |   });
  11 |   await page.request.post(`${API_BASE}/api/subjects`, {
  12 |     headers: { Authorization: `Bearer ${token}` },
  13 |     data: { name: `Sci${ts}` },
  14 |   });
  15 |
  16 |   const subjectsRes = await page.request.get(`${API_BASE}/api/subjects`, {
  17 |     headers: { Authorization: `Bearer ${token}` },
  18 |   });
  19 |   const subjects = (await subjectsRes.json()) as Array<{ id: number; name: string }>;
  20 |   const mathId = subjects.find((s) => s.name === `Math${ts}`)!.id;
  21 |   const sciId = subjects.find((s) => s.name === `Sci${ts}`)!.id;
  22 |
  23 |   await page.request.post(`${API_BASE}/api/milestones`, {
  24 |     headers: { Authorization: `Bearer ${token}` },
  25 |     data: { title: `M1${ts}`, subjectId: mathId },
  26 |   });
  27 |   await page.request.post(`${API_BASE}/api/milestones`, {
  28 |     headers: { Authorization: `Bearer ${token}` },
  29 |     data: { title: `M2${ts}`, subjectId: sciId },
  30 |   });
  31 |   const milestones = (await (
  32 |     await page.request.get(`${API_BASE}/api/milestones`, {
  33 |       headers: { Authorization: `Bearer ${token}` },
  34 |     })
  35 |   ).json()) as Array<{
  36 |     id: number;
  37 |     title: string;
  38 |   }>;
  39 |   const mathMilestoneId = milestones.find((m) => m.title === `M1${ts}`)!.id;
  40 |   const sciMilestoneId = milestones.find((m) => m.title === `M2${ts}`)!.id;
  41 |
  42 |   await page.request.post(`${API_BASE}/api/activities`, {
  43 |     headers: { Authorization: `Bearer ${token}` },
  44 |     data: { title: `A1${ts}`, milestoneId: mathMilestoneId },
  45 |   });
  46 |   await page.request.post(`${API_BASE}/api/activities`, {
  47 |     headers: { Authorization: `Bearer ${token}` },
  48 |     data: { title: `A2${ts}`, milestoneId: sciMilestoneId },
  49 |   });
  50 |   const activities = (await (
  51 |     await page.request.get(`${API_BASE}/api/activities`, {
  52 |       headers: { Authorization: `Bearer ${token}` },
  53 |     })
  54 |   ).json()) as Array<{
  55 |     id: number;
  56 |     title: string;
  57 |   }>;
  58 |   const mathActId = activities.find((a) => a.title === `A1${ts}`)!.id;
  59 |   const sciActId = activities.find((a) => a.title === `A2${ts}`)!.id;
  60 |
  61 |   await page.request.post(`${API_BASE}/api/notes`, {
  62 |     headers: { Authorization: `Bearer ${token}` },
  63 |     data: { content: 'Math Public', type: 'public', activityId: mathActId },
  64 |   });
  65 |   await page.request.post(`${API_BASE}/api/notes`, {
  66 |     headers: { Authorization: `Bearer ${token}` },
  67 |     data: { content: 'Math Private', type: 'private', activityId: mathActId },
  68 |   });
  69 |   await page.request.post(`${API_BASE}/api/notes`, {
  70 |     headers: { Authorization: `Bearer ${token}` },
  71 |     data: { content: 'Sci Public', type: 'public', activityId: sciActId },
  72 |   });
  73 |
  74 |   await page.goto('/reflections');
> 75 |   await page.selectOption('select', `${mathId}`);
     |              ^ TimeoutError: page.selectOption: Timeout 10000ms exceeded.
  76 |   await page.check('label:has-text("Public") input');
  77 |
  78 |   await expect(page.locator('text=Math Public')).toBeVisible();
  79 |   await expect(page.locator('text=Math Private')).toHaveCount(0);
  80 |   await expect(page.locator('text=Sci Public')).toHaveCount(0);
  81 | });
  82 |
```
