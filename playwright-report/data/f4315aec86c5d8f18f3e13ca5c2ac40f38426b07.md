# Test info

- Name: reorders activities within milestone
- Location: /Users/michaelmcisaac/GitHub/teaching-engine2.0/tests/e2e/activity-reorder.spec.ts:5:5

# Error details

```
Error: page.goto: net::ERR_CONNECTION_REFUSED at http://localhost:5173/subjects
Call log:
  - navigating to "http://localhost:5173/subjects", waiting until "load"

    at /Users/michaelmcisaac/GitHub/teaching-engine2.0/tests/e2e/activity-reorder.spec.ts:7:14
```

# Test source

```ts
   1 | import { test, expect } from '@playwright/test';
   2 |
   3 | // drag first activity to last and ensure order persists
   4 |
   5 | test('reorders activities within milestone', async ({ page }) => {
   6 |   const ts = Date.now();
>  7 |   await page.goto('/subjects');
     |              ^ Error: page.goto: net::ERR_CONNECTION_REFUSED at http://localhost:5173/subjects
   8 |
   9 |   await page.click('text=Add Subject');
  10 |   await page.fill('input[placeholder="New subject"]', `Sub${ts}`);
  11 |   await page.click('button:has-text("Save")');
  12 |   await page.click(`text=Sub${ts}`);
  13 |
  14 |   await page.click('text=Add Milestone');
  15 |   await page.fill('input[placeholder="New milestone"]', 'M');
  16 |   await page.click('button:has-text("Save")');
  17 |   await page.click('a:has-text("M")');
  18 |   await page.waitForSelector('button:has-text("Add Activity")');
  19 |
  20 |   for (const a of ['A1', 'A2', 'A3']) {
  21 |     await page.click('button:has-text("Add Activity")');
  22 |     await page.fill('input[placeholder="New activity"]', a);
  23 |     await page.click('button:has-text("Save")');
  24 |     await page.waitForSelector('button:has-text("Add Activity")');
  25 |   }
  26 |
  27 |   const items = page.locator('li');
  28 |   await items.nth(0).dragTo(items.nth(2));
  29 |   await page.reload();
  30 |   await page.waitForSelector('button:has-text("Add Activity")');
  31 |   const texts = await page.locator('li span.flex-1').allTextContents();
  32 |   expect(texts.slice(0, 3)).toEqual(['A2', 'A3', 'A1']);
  33 | });
  34 |
```
