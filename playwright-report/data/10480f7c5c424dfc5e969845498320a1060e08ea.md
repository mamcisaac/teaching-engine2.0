# Test info

- Name: planner tag filters
- Location: /Users/michaelmcisaac/GitHub/teaching-engine2.0/tests/e2e/planner-filters.spec.ts:3:5

# Error details

```
Error: page.goto: net::ERR_CONNECTION_REFUSED at http://localhost:5173/subjects
Call log:
  - navigating to "http://localhost:5173/subjects", waiting until "load"

    at /Users/michaelmcisaac/GitHub/teaching-engine2.0/tests/e2e/planner-filters.spec.ts:5:14
```

# Test source

```ts
   1 | import { test, expect } from '@playwright/test';
   2 |
   3 | test('planner tag filters', async ({ page }) => {
   4 |   const ts = Date.now();
>  5 |   await page.goto('/subjects');
     |              ^ Error: page.goto: net::ERR_CONNECTION_REFUSED at http://localhost:5173/subjects
   6 |   await page.click('text=Add Subject');
   7 |   await page.fill('input[placeholder="New subject"]', `F${ts}`);
   8 |   await page.click('button:has-text("Save")');
   9 |   await page.click(`text=F${ts}`);
  10 |
  11 |   await page.click('text=Add Milestone');
  12 |   await page.fill('input[placeholder="New milestone"]', `M${ts}`);
  13 |   await page.click('button:has-text("Save")');
  14 |   await page.click(`text=M${ts}`);
  15 |
  16 |   const mRes = await page.request.get('/api/milestones');
  17 |   const milestoneList = (await mRes.json()) as Array<{ id: number; title: string }>;
  18 |   const m = milestoneList.find((milestone) => milestone.title === `M${ts}`);
  19 |   const milestoneId = m?.id ?? 1;
  20 |
  21 |   // create activities via API with tags
  22 |   await page.request.post('/api/activities', {
  23 |     data: { title: 'WorksheetAct', milestoneId, tags: ['Worksheet'] },
  24 |   });
  25 |   await page.request.post('/api/activities', {
  26 |     data: { title: 'VideoAct', milestoneId, tags: ['Video'] },
  27 |   });
  28 |
  29 |   await page.goto('/planner');
  30 |   await page.uncheck('label:has-text("HandsOn") input');
  31 |   await page.uncheck('label:has-text("Video") input');
  32 |   await page.check('label:has-text("Worksheet") input');
  33 |   await expect(page.locator('text=WorksheetAct').first()).toBeVisible();
  34 |   await expect(page.locator('text=VideoAct')).toHaveCount(0);
  35 | });
  36 |
```
