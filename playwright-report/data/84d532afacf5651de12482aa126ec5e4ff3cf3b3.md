# Test info

- Name: planner blocks times from calendar events
- Location: /Users/michaelmcisaac/GitHub/teaching-engine2.0/tests/e2e/calendar-blocking.spec.ts:9:5

# Error details

```
TimeoutError: page.waitForSelector: Timeout 10000ms exceeded.
Call log:
  - waiting for locator('.planner-grid') to be visible

    at /Users/michaelmcisaac/GitHub/teaching-engine2.0/tests/e2e/calendar-blocking.spec.ts:23:14
```

# Test source

```ts
   1 | import { test, expect } from '@playwright/test';
   2 | import { login, API_BASE } from './helpers';
   3 |
   4 | /**
   5 |  * Test that verifies the planner correctly blocks times based on calendar events.
   6 |  * Previously skipped due to incomplete calendar blocking feature.
   7 |  * Now enabled as the feature is fully implemented and stable.
   8 |  */
   9 | test('planner blocks times from calendar events', async ({ page }) => {
  10 |   const token = await login(page);
  11 |   const today = new Date().toISOString().split('T')[0];
  12 |   await page.request.post(`${API_BASE}/api/calendar-events`, {
  13 |     headers: { Authorization: `Bearer ${token}` },
  14 |     data: {
  15 |       title: 'Assembly',
  16 |       start: `${today}T00:00:00.000Z`,
  17 |       end: `${today}T23:59:59.000Z`,
  18 |       allDay: true,
  19 |       eventType: 'ASSEMBLY',
  20 |     },
  21 |   });
  22 |   await page.goto('/planner');
> 23 |   await page.waitForSelector('.planner-grid', { timeout: 10000 });
     |              ^ TimeoutError: page.waitForSelector: Timeout 10000ms exceeded.
  24 |   await page.waitForResponse((r) => r.url().includes('/calendar-events') && r.status() === 200);
  25 |   const blocked = page.locator('text=Assembly').first();
  26 |   await expect(blocked).toBeVisible();
  27 | });
  28 |
```
