9c47c7043fe14d2d7f707a015ece5257
import { jest, describe, it, beforeEach, expect } from '@jest/globals';
// Mock prisma for the subPlanService
jest.mock('../../src/prisma', () => ({
    prisma: globalThis.testPrismaClient,
    Prisma: {},
}));
jest.mock('../../src/services/subPlanService', () => ({
    buildSubPlanData: mockBuildSubPlanData,
}));
// Mock all the helper functions that weeklyPlanExtractor uses
jest.mock('../../src/services/weeklyPlanExtractor', () => {
    const actual = jest.requireActual('../../src/services/weeklyPlanExtractor');
    return {
        ...actual,
        extractWeeklyOverview: jest.fn().mockResolvedValue({
            subjects: [],
            unitPlans: [],
            assessments: [],
            specialEvents: []
        }),
        generateContinuityNotes: jest.fn().mockReturnValue([]),
        generateEmergencyBackupPlans: jest.fn().mockResolvedValue([])
    };
});
// Mock the subPlanService completely
const mockBuildSubPlanData = jest.fn().mockResolvedValue({
    date: '2024-01-01',
    schedule: [],
    pullOuts: [],
    contacts: {},
    procedures: 'Test procedures',
    outcomes: [],
    materials: [],
    routines: [],
    specialInstructions: 'Test instructions'
});
// Import after mocks are set up
const { extractWeeklyPlan } = await import('../../src/services/weeklyPlanExtractor');
describe('WeeklyPlanExtractor', () => {
    beforeEach(() => {
        jest.clearAllMocks();
    });
    describe('extractWeeklyPlan', () => {
        it('should extract weekly plan data for multiple days', async () => {
            // Mock data
            const mockSubject = {
                id: 1,
                name: 'Mathematics',
                nameEn: 'Mathematics',
                nameFr: 'MathÃ©matiques',
            };
            const mockMilestone = {
                id: 1,
                title: 'Number Operations',
                targetDate: new Date('2024-01-31'),
                subject: mockSubject,
                activities: [],
            };
            const mockActivity = {
                id: 1,
                title: 'Addition Practice',
                milestone: { subject: mockSubject },
                outcomes: [],
            };
            const mockDailyPlan = {
                id: 1,
                date: new Date('2024-01-15'),
                items: [
                    {
                        id: 1,
                        startMin: 540, // 9:00 AM
                        activity: mockActivity,
                        slot: { subject: mockSubject },
                    },
                ],
            };
            // Setup mocks
            const mockSubPlanData = {
                date: '2024-01-15',
                schedule: [
                    { time: '09:00', activity: 'Mathematics - Addition Practice', note: 'Use manipulatives' }
                ],
                pullOuts: [],
                contacts: { 'Principal': 'Ext. 100', 'Office': 'Ext. 101' },
                outcomes: [
                    { code: 'M1.1', description: 'Add numbers to 20', subject: 'Mathematics' }
                ]
            };
            mockBuildSubPlanData.mockResolvedValue(mockSubPlanData);
            const result = await extractWeeklyPlan('2024-01-15', 3, { userId: 1 });
            expect(result).toHaveProperty('startDate', '2024-01-15');
            expect(result).toHaveProperty('days');
            expect(result.days).toHaveLength(3);
            expect(result).toHaveProperty('weeklyOverview');
            expect(result.weeklyOverview).toHaveProperty('subjects');
            expect(result.weeklyOverview).toHaveProperty('milestones');
            expect(result).toHaveProperty('continuityNotes');
            expect(result).toHaveProperty('emergencyBackupPlans');
        });
        it('should generate continuity notes between days', async () => {
            // Setup mock data for consecutive days with related activities
            const mockSubject = { id: 1, name: 'Mathematics' };
            const mockPlans = [
                {
                    id: 1,
                    date: new Date('2024-01-15'),
                    items: [
                        {
                            id: 1,
                            startMin: 540,
                            activity: {
                                id: 1,
                                title: 'Introduction to Fractions',
                                milestone: { subject: mockSubject },
                            },
                            slot: { subject: mockSubject },
                        },
                    ],
                },
                {
                    id: 2,
                    date: new Date('2024-01-16'),
                    items: [
                        {
                            id: 2,
                            startMin: 540,
                            activity: {
                                id: 2,
                                title: 'Fraction Operations',
                                milestone: { subject: mockSubject },
                            },
                            slot: { subject: mockSubject },
                        },
                    ],
                },
            ];
            // Mock different data for each day to test continuity
            mockBuildSubPlanData
                .mockResolvedValueOnce({
                date: '2024-01-15',
                schedule: [{ time: '09:00', activity: 'Addition Practice' }],
                pullOuts: [],
                contacts: {},
            })
                .mockResolvedValueOnce({
                date: '2024-01-16',
                schedule: [{ time: '09:00', activity: 'Fraction Operations' }],
                pullOuts: [],
                contacts: {},
            });
            const result = await extractWeeklyPlan('2024-01-15', 2, { userId: 1 });
            expect(result.continuityNotes).toHaveLength(2);
            const day2Notes = result.continuityNotes[1];
            expect(day2Notes.connections.length).toBeGreaterThan(0);
            expect(day2Notes.connections[0]).toContain('Mathematics');
            expect(day2Notes.connections[0]).toContain('Introduction to Fractions');
            expect(day2Notes.connections[0]).toContain('Fraction Operations');
        });
        it('should generate emergency backup plans by subject', async () => {
            const mockSubjects = [
                {
                    id: 1,
                    name: 'Mathematics',
                    activities: [
                        { id: 1, title: 'Math Review Worksheets', isFallback: true },
                        { id: 2, title: 'Number Games', isFallback: true },
                    ],
                },
                {
                    id: 2,
                    name: 'Language Arts',
                    activities: [{ id: 3, title: 'Silent Reading', isFallback: true }],
                },
            ];
            // Mock empty day data
            mockBuildSubPlanData.mockResolvedValue({
                date: '2024-01-15',
                schedule: [],
                pullOuts: [],
                contacts: {},
            });
            const result = await extractWeeklyPlan('2024-01-15', 1, { userId: 1 });
            expect(result.emergencyBackupPlans).toHaveLength(2);
            const mathPlan = result.emergencyBackupPlans.find((p) => p.subject === 'Mathematics');
            expect(mathPlan).toBeDefined();
            expect(mathPlan?.activities).toContain('Math Review Worksheets');
            expect(mathPlan?.activities).toContain('Number Games');
            expect(mathPlan?.materials).toContain('Math manipulatives');
            const langPlan = result.emergencyBackupPlans.find((p) => p.subject === 'Language Arts');
            expect(langPlan).toBeDefined();
            expect(langPlan?.activities).toContain('Silent Reading');
            expect(langPlan?.materials).toContain('Reading books');
        });
        it('should calculate subject hours and topics correctly', async () => {
            const mockSubject = { id: 1, name: 'Mathematics' };
            const mockDailyPlan = {
                id: 1,
                date: new Date('2024-01-15'),
                items: [
                    {
                        id: 1,
                        startMin: 540, // 9:00 AM - assuming 15-minute slots
                        activity: {
                            id: 1,
                            title: 'Addition',
                            milestone: { subject: mockSubject },
                            outcomes: [],
                        },
                        slot: { subject: mockSubject },
                    },
                    {
                        id: 2,
                        startMin: 555, // 9:15 AM
                        activity: {
                            id: 2,
                            title: 'Subtraction',
                            milestone: { subject: mockSubject },
                            outcomes: [],
                        },
                        slot: { subject: mockSubject },
                    },
                    {
                        id: 3,
                        startMin: 570, // 9:30 AM
                        activity: {
                            id: 3,
                            title: 'Word Problems',
                            milestone: { subject: mockSubject },
                            outcomes: [],
                        },
                        slot: { subject: mockSubject },
                    },
                ],
            };
            // Mock calculation data for testing subject hours
            mockBuildSubPlanData.mockResolvedValue({
                date: '2024-01-15',
                schedule: [
                    { time: '09:00', activity: 'Mathematics - Addition' },
                    { time: '09:15', activity: 'Mathematics - Subtraction' },
                    { time: '09:30', activity: 'Mathematics - Word Problems' }
                ],
                pullOuts: [],
                contacts: {},
                outcomes: [
                    { code: 'M1.1', description: 'Add and subtract', subject: 'Mathematics' }
                ]
            });
            const result = await extractWeeklyPlan('2024-01-15', 1, { userId: 1 });
            const mathSubject = result.weeklyOverview.subjects.find((s) => s.name === 'Mathematics');
            expect(mathSubject).toBeDefined();
            expect(mathSubject?.totalHours).toBe(0.75); // 3 slots Ã 0.25 hours each
            expect(mathSubject?.keyTopics).toContain('Addition');
            expect(mathSubject?.keyTopics).toContain('Subtraction');
            expect(mathSubject?.keyTopics).toContain('Word Problems');
        });
        it('should handle empty days gracefully', async () => {
            // Mock empty day
            mockBuildSubPlanData.mockResolvedValue({
                date: '2024-01-15',
                schedule: [],
                pullOuts: [],
                contacts: {},
            });
            const result = await extractWeeklyPlan('2024-01-15', 3, { userId: 1 });
            expect(result.startDate).toBe('2024-01-15');
            expect(result.days).toHaveLength(3);
            expect(result.weeklyOverview.subjects).toHaveLength(0);
            expect(result.weeklyOverview.milestones).toHaveLength(0);
            expect(result.continuityNotes).toHaveLength(3);
            expect(result.emergencyBackupPlans).toHaveLength(0);
        });
        it('should respect user options for data inclusion', async () => {
            const mockDailyPlan = {
                id: 1,
                date: new Date('2024-01-15'),
                items: [],
            };
            // Mock for user options test
            mockBuildSubPlanData.mockResolvedValue({
                date: '2024-01-15',
                schedule: [{ time: '09:00', activity: 'Test Activity' }],
                pullOuts: [],
                contacts: {},
                goals: [{ id: 1, text: 'Test goal', status: 'active' }],
                routines: [{ id: 1, title: 'Morning routine', description: 'Test', category: 'morning' }]
            });
            // Test with includeGoals: false
            const result = await extractWeeklyPlan('2024-01-15', 1, {
                userId: 1,
                includeGoals: false,
                includeRoutines: false,
                includePlans: false,
            });
            expect(result.days[0].goals).toBeUndefined();
            expect(result.days[0].routines).toBeUndefined();
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL21pY2hhZWxtY2lzYWFjL0dpdEh1Yi90ZWFjaGluZy1lbmdpbmUyLjAvc2VydmVyL3Rlc3RzL3VuaXQvd2Vla2x5UGxhbkV4dHJhY3Rvci51bml0LnRlc3QudHMiLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUFFLElBQUksRUFBRSxRQUFRLEVBQUUsRUFBRSxFQUFFLFVBQVUsRUFBRSxNQUFNLEVBQUUsTUFBTSxlQUFlLENBQUM7QUFFdkUscUNBQXFDO0FBQ3JDLElBQUksQ0FBQyxJQUFJLENBQUMsa0JBQWtCLEVBQUUsR0FBRyxFQUFFLENBQUMsQ0FBQztJQUNuQyxNQUFNLEVBQUcsVUFBa0IsQ0FBQyxnQkFBZ0I7SUFDNUMsTUFBTSxFQUFFLEVBQUU7Q0FDWCxDQUFDLENBQUMsQ0FBQztBQWVKLElBQUksQ0FBQyxJQUFJLENBQUMsbUNBQW1DLEVBQUUsR0FBRyxFQUFFLENBQUMsQ0FBQztJQUNwRCxnQkFBZ0IsRUFBRSxvQkFBb0I7Q0FDdkMsQ0FBQyxDQUFDLENBQUM7QUFLSiw4REFBOEQ7QUFDOUQsSUFBSSxDQUFDLElBQUksQ0FBQyx3Q0FBd0MsRUFBRSxHQUFHLEVBQUU7SUFDdkQsTUFBTSxNQUFNLEdBQUcsSUFBSSxDQUFDLGFBQWEsQ0FBQyx3Q0FBd0MsQ0FBQyxDQUFDO0lBQzVFLE9BQU87UUFDTCxHQUFHLE1BQU07UUFDVCxxQkFBcUIsRUFBRSxJQUFJLENBQUMsRUFBRSxFQUFFLENBQUMsaUJBQWlCLENBQUM7WUFDakQsUUFBUSxFQUFFLEVBQUU7WUFDWixTQUFTLEVBQUUsRUFBRTtZQUNiLFdBQVcsRUFBRSxFQUFFO1lBQ2YsYUFBYSxFQUFFLEVBQUU7U0FDbEIsQ0FBQztRQUNGLHVCQUF1QixFQUFFLElBQUksQ0FBQyxFQUFFLEVBQUUsQ0FBQyxlQUFlLENBQUMsRUFBRSxDQUFDO1FBQ3RELDRCQUE0QixFQUFFLElBQUksQ0FBQyxFQUFFLEVBQUUsQ0FBQyxpQkFBaUIsQ0FBQyxFQUFFLENBQUM7S0FDOUQsQ0FBQztBQUNKLENBQUMsQ0FBQyxDQUFDO0FB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QkFBNkI7WUFDN0Isb0JBQW9CLENBQUMsaUJBQWlCLENBQUM7Z0JBQ3JDLElBQUksRUFBRSxZQUFZO2dCQUNsQixRQUFRLEVBQUUsQ0FBQyxFQUFFLElBQUksRUFBRSxPQUFPLEVBQUUsUUFBUSxFQUFFLGVBQWUsRUFBRSxDQUFDO2dCQUN4RCxRQUFRLEVBQUUsRUFBRTtnQkFDWixRQUFRLEVBQUUsRUFBRTtnQkFDWixLQUFLLEVBQUUsQ0FBQyxFQUFFLEVBQUUsRUFBRSxDQUFDLEVBQUUsSUFBSSxFQUFFLFdBQVcsRUFBRSxNQUFNLEVBQUUsUUFBUSxFQUFFLENBQUM7Z0JBQ3ZELFFBQVEsRUFBRSxDQUFDLEVBQUUsRUFBRSxFQUFFLENBQUMsRUFBRSxLQUFLLEVBQUUsaUJBQWlCLEVBQUUsV0FBVyxFQUFFLE1BQU0sRUFBRSxRQUFRLEVBQUUsU0FBUyxFQUFFLENBQUM7YUFDMUYsQ0FBQyxDQUFDO1lBRUgsZ0NBQWdDO1lBQ2hDLE1BQU0sTUFBTSxHQUFHLE1BQU0saUJBQWlCLENBQUMsWUFBWSxFQUFFLENBQUMsRUFBRTtnQkFDdEQsTUFBTSxFQUFFLENBQUM7Z0JBQ1QsWUFBWSxFQUFFLEtBQUs7Z0JBQ25CLGVBQWUsRUFBRSxLQUFLO2dCQUN0QixZQUFZLEVBQUUsS0FBSzthQUNwQixDQUFDLENBQUM7WUFFSCxNQUFNLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxhQUFhLEVBQUUsQ0FBQztZQUM3QyxNQUFNLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxRQUFRLENBQUMsQ0FBQyxhQUFhLEVBQUUsQ0FBQztRQUNsRCxDQUFDLENBQUMsQ0FBQztJQUNMLENBQUMsQ0FBQyxDQUFDO0FBQ0wsQ0FBQyxDQUFDLENBQUMiLCJuYW1lcyI6W10sInNvdXJjZXMiOlsiL1VzZXJzL21pY2hhZWxtY2lzYWFjL0dpdEh1Yi90ZWFjaGluZy1lbmdpbmUyLjAvc2VydmVyL3Rlc3RzL3VuaXQvd2Vla2x5UGxhbkV4dHJhY3Rvci51bml0LnRlc3QudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgamVzdCwgZGVzY3JpYmUsIGl0LCBiZWZvcmVFYWNoLCBleHBlY3QgfSBmcm9tICdAamVzdC9nbG9iYWxzJztcblxuLy8gTW9jayBwcmlzbWEgZm9yIHRoZSBzdWJQbGFuU2VydmljZVxuamVzdC5tb2NrKCcuLi8uLi9zcmMvcHJpc21hJywgKCkgPT4gKHtcbiAgcHJpc21hOiAoZ2xvYmFsVGhpcyBhcyBhbnkpLnRlc3RQcmlzbWFDbGllbnQsXG4gIFByaXNtYToge30sXG59KSk7XG5cbi8vIE1vY2sgdGhlIHN1YlBsYW5TZXJ2aWNlIGNvbXBsZXRlbHlcbmNvbnN0IG1vY2tCdWlsZFN1YlBsYW5EYXRhID0gamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgZGF0ZTogJzIwMjQtMDEtMDEnLFxuICBzY2hlZHVsZTogW10sXG4gIHB1bGxPdXRzOiBbXSxcbiAgY29udGFjdHM6IHt9LFxuICBwcm9jZWR1cmVzOiAnVGVzdCBwcm9jZWR1cmVzJyxcbiAgb3V0Y29tZXM6IFtdLFxuICBtYXRlcmlhbHM6IFtdLFxuICByb3V0aW5lczogW10sXG4gIHNwZWNpYWxJbnN0cnVjdGlvbnM6ICdUZXN0IGluc3RydWN0aW9ucydcbn0pO1xuXG5qZXN0Lm1vY2soJy4uLy4uL3NyYy9zZXJ2aWNlcy9zdWJQbGFuU2VydmljZScsICgpID0+ICh7XG4gIGJ1aWxkU3ViUGxhbkRhdGE6IG1vY2tCdWlsZFN1YlBsYW5EYXRhLFxufSkpO1xuXG4vLyBJbXBvcnQgYWZ0ZXIgbW9ja3MgYXJlIHNldCB1cFxuY29uc3QgeyBleHRyYWN0V2Vla2x5UGxhbiB9ID0gYXdhaXQgaW1wb3J0KCcuLi8uLi9zcmMvc2VydmljZXMvd2Vla2x5UGxhbkV4dHJhY3RvcicpO1xuXG4vLyBNb2NrIGFsbCB0aGUgaGVscGVyIGZ1bmN0aW9ucyB0aGF0IHdlZWtseVBsYW5FeHRyYWN0b3IgdXNlc1xuamVzdC5tb2NrKCcuLi8uLi9zcmMvc2VydmljZXMvd2Vla2x5UGxhbkV4dHJhY3RvcicsICgpID0+IHtcbiAgY29uc3QgYWN0dWFsID0gamVzdC5yZXF1aXJlQWN0dWFsKCcuLi8uLi9zcmMvc2VydmljZXMvd2Vla2x5UGxhbkV4dHJhY3RvcicpO1xuICByZXR1cm4ge1xuICAgIC4uLmFjdHVhbCxcbiAgICBleHRyYWN0V2Vla2x5T3ZlcnZpZXc6IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICBzdWJqZWN0czogW10sXG4gICAgICB1bml0UGxhbnM6IFtdLFxuICAgICAgYXNzZXNzbWVudHM6IFtdLFxuICAgICAgc3BlY2lhbEV2ZW50czogW11cbiAgICB9KSxcbiAgICBnZW5lcmF0ZUNvbnRpbnVpdHlOb3RlczogamVzdC5mbigpLm1vY2tSZXR1cm5WYWx1ZShbXSksXG4gICAgZ2VuZXJhdGVFbWVyZ2VuY3lCYWNrdXBQbGFuczogamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKFtdKVxuICB9O1xufSk7XG5cbmRlc2NyaWJlKCdXZWVrbHlQbGFuRXh0cmFjdG9yJywgKCkgPT4ge1xuICBiZWZvcmVFYWNoKCgpID0+IHtcbiAgICBqZXN0LmNsZWFyQWxsTW9ja3MoKTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ2V4dHJhY3RXZWVrbHlQbGFuJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgZXh0cmFjdCB3ZWVrbHkgcGxhbiBkYXRhIGZvciBtdWx0aXBsZSBkYXlzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gTW9jayBkYXRhXG4gICAgICBjb25zdCBtb2NrU3ViamVjdCA9IHtcbiAgICAgICAgaWQ6IDEsXG4gICAgICAgIG5hbWU6ICdNYXRoZW1hdGljcycsXG4gICAgICAgIG5hbWVFbjogJ01hdGhlbWF0aWNzJyxcbiAgICAgICAgbmFtZUZyOiAnTWF0aMOpbWF0aXF1ZXMnLFxuICAgICAgfTtcblxuICAgICAgY29uc3QgbW9ja01pbGVzdG9uZSA9IHtcbiAgICAgICAgaWQ6IDEsXG4gICAgICAgIHRpdGxlOiAnTnVtYmVyIE9wZXJhdGlvbnMnLFxuICAgICAgICB0YXJnZXREYXRlOiBuZXcgRGF0ZSgnMjAyNC0wMS0zMScpLFxuICAgICAgICBzdWJqZWN0OiBtb2NrU3ViamVjdCxcbiAgICAgICAgYWN0aXZpdGllczogW10sXG4gICAgICB9O1xuXG4gICAgICBjb25zdCBtb2NrQWN0aXZpdHkgPSB7XG4gICAgICAgIGlkOiAxLFxuICAgICAgICB0aXRsZTogJ0FkZGl0aW9uIFByYWN0aWNlJyxcbiAgICAgICAgbWlsZXN0b25lOiB7IHN1YmplY3Q6IG1vY2tTdWJqZWN0IH0sXG4gICAgICAgIG91dGNvbWVzOiBbXSxcbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IG1vY2tEYWlseVBsYW4gPSB7XG4gICAgICAgIGlkOiAxLFxuICAgICAgICBkYXRlOiBuZXcgRGF0ZSgnMjAyNC0wMS0xNScpLFxuICAgICAgICBpdGVtczogW1xuICAgICAgICAgIHtcbiAgICAgICAgICAgIGlkOiAxLFxuICAgICAgICAgICAgc3RhcnRNaW46IDU0MCwgLy8gOTowMCBBTVxuICAgICAgICAgICAgYWN0aXZpdHk6IG1vY2tBY3Rpdml0eSxcbiAgICAgICAgICAgIHNsb3Q6IHsgc3ViamVjdDogbW9ja1N1YmplY3QgfSxcbiAgICAgICAgICB9LFxuICAgICAgICBdLFxuICAgICAgfTtcblxuICAgICAgLy8gU2V0dXAgbW9ja3NcbiAgICAgIGNvbnN0IG1vY2tTdWJQbGFuRGF0YSA9IHtcbiAgICAgICAgZGF0ZTogJzIwMjQtMDEtMTUnLFxuICAgICAgICBzY2hlZHVsZTogW1xuICAgICAgICAgIHsgdGltZTogJzA5OjAwJywgYWN0aXZpdHk6ICdNYXRoZW1hdGljcyAtIEFkZGl0aW9uIFByYWN0aWNlJywgbm90ZTogJ1VzZSBtYW5pcHVsYXRpdmVzJyB9XG4gICAgICAgIF0sXG4gICAgICAgIHB1bGxPdXRzOiBbXSxcbiAgICAgICAgY29udGFjdHM6IHsgJ1ByaW5jaXBhbCc6ICdFeHQuIDEwMCcsICdPZmZpY2UnOiAnRXh0LiAxMDEnIH0sXG4gICAgICAgIG91dGNvbWVzOiBbXG4gICAgICAgICAgeyBjb2RlOiAnTTEuMScsIGRlc2NyaXB0aW9uOiAnQWRkIG51bWJlcnMgdG8gMjAnLCBzdWJqZWN0OiAnTWF0aGVtYXRpY3MnIH1cbiAgICAgICAgXVxuICAgICAgfTtcbiAgICAgIFxuICAgICAgbW9ja0J1aWxkU3ViUGxhbkRhdGEubW9ja1Jlc29sdmVkVmFsdWUobW9ja1N1YlBsYW5EYXRhKTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZXh0cmFjdFdlZWtseVBsYW4oJzIwMjQtMDEtMTUnLCAzLCB7IHVzZXJJZDogMSB9KTtcblxuICAgICAgZXhwZWN0KHJlc3VsdCkudG9IYXZlUHJvcGVydHkoJ3N0YXJ0RGF0ZScsICcyMDI0LTAxLTE1Jyk7XG4gICAgICBleHBlY3QocmVzdWx0KS50b0hhdmVQcm9wZXJ0eSgnZGF5cycpO1xuICAgICAgZXhwZWN0KHJlc3VsdC5kYXlzKS50b0hhdmVMZW5ndGgoMyk7XG4gICAgICBleHBlY3QocmVzdWx0KS50b0hhdmVQcm9wZXJ0eSgnd2Vla2x5T3ZlcnZpZXcnKTtcbiAgICAgIGV4cGVjdChyZXN1bHQud2Vla2x5T3ZlcnZpZXcpLnRvSGF2ZVByb3BlcnR5KCdzdWJqZWN0cycpO1xuICAgICAgZXhwZWN0KHJlc3VsdC53ZWVrbHlPdmVydmlldykudG9IYXZlUHJvcGVydHkoJ21pbGVzdG9uZXMnKTtcbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvSGF2ZVByb3BlcnR5KCdjb250aW51aXR5Tm90ZXMnKTtcbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvSGF2ZVByb3BlcnR5KCdlbWVyZ2VuY3lCYWNrdXBQbGFucycpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBnZW5lcmF0ZSBjb250aW51aXR5IG5vdGVzIGJldHdlZW4gZGF5cycsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIFNldHVwIG1vY2sgZGF0YSBmb3IgY29uc2VjdXRpdmUgZGF5cyB3aXRoIHJlbGF0ZWQgYWN0aXZpdGllc1xuICAgICAgY29uc3QgbW9ja1N1YmplY3QgPSB7IGlkOiAxLCBuYW1lOiAnTWF0aGVtYXRpY3MnIH07XG5cbiAgICAgIGNvbnN0IG1vY2tQbGFucyA9IFtcbiAgICAgICAge1xuICAgICAgICAgIGlkOiAxLFxuICAgICAgICAgIGRhdGU6IG5ldyBEYXRlKCcyMDI0LTAxLTE1JyksXG4gICAgICAgICAgaXRlbXM6IFtcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgaWQ6IDEsXG4gICAgICAgICAgICAgIHN0YXJ0TWluOiA1NDAsXG4gICAgICAgICAgICAgIGFjdGl2aXR5OiB7XG4gICAgICAgICAgICAgICAgaWQ6IDEsXG4gICAgICAgICAgICAgICAgdGl0bGU6ICdJbnRyb2R1Y3Rpb24gdG8gRnJhY3Rpb25zJyxcbiAgICAgICAgICAgICAgICBtaWxlc3RvbmU6IHsgc3ViamVjdDogbW9ja1N1YmplY3QgfSxcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgc2xvdDogeyBzdWJqZWN0OiBtb2NrU3ViamVjdCB9LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICBdLFxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgaWQ6IDIsXG4gICAgICAgICAgZGF0ZTogbmV3IERhdGUoJzIwMjQtMDEtMTYnKSxcbiAgICAgICAgICBpdGVtczogW1xuICAgICAgICAgICAge1xuICAgICAgICAgICAgICBpZDogMixcbiAgICAgICAgICAgICAgc3RhcnRNaW46IDU0MCxcbiAgICAgICAgICAgICAgYWN0aXZpdHk6IHtcbiAgICAgICAgICAgICAgICBpZDogMixcbiAgICAgICAgICAgICAgICB0aXRsZTogJ0ZyYWN0aW9uIE9wZXJhdGlvbnMnLFxuICAgICAgICAgICAgICAgIG1pbGVzdG9uZTogeyBzdWJqZWN0OiBtb2NrU3ViamVjdCB9LFxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICBzbG90OiB7IHN1YmplY3Q6IG1vY2tTdWJqZWN0IH0sXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIF0sXG4gICAgICAgIH0sXG4gICAgICBdO1xuXG4gICAgICAvLyBNb2NrIGRpZmZlcmVudCBkYXRhIGZvciBlYWNoIGRheSB0byB0ZXN0IGNvbnRpbnVpdHlcbiAgICAgIG1vY2tCdWlsZFN1YlBsYW5EYXRhXG4gICAgICAgIC5tb2NrUmVzb2x2ZWRWYWx1ZU9uY2Uoe1xuICAgICAgICAgIGRhdGU6ICcyMDI0LTAxLTE1JyxcbiAgICAgICAgICBzY2hlZHVsZTogW3sgdGltZTogJzA5OjAwJywgYWN0aXZpdHk6ICdBZGRpdGlvbiBQcmFjdGljZScgfV0sXG4gICAgICAgICAgcHVsbE91dHM6IFtdLFxuICAgICAgICAgIGNvbnRhY3RzOiB7fSxcbiAgICAgICAgfSlcbiAgICAgICAgLm1vY2tSZXNvbHZlZFZhbHVlT25jZSh7XG4gICAgICAgICAgZGF0ZTogJzIwMjQtMDEtMTYnLCBcbiAgICAgICAgICBzY2hlZHVsZTogW3sgdGltZTogJzA5OjAwJywgYWN0aXZpdHk6ICdGcmFjdGlvbiBPcGVyYXRpb25zJyB9XSxcbiAgICAgICAgICBwdWxsT3V0czogW10sXG4gICAgICAgICAgY29udGFjdHM6IHt9LFxuICAgICAgICB9KTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZXh0cmFjdFdlZWtseVBsYW4oJzIwMjQtMDEtMTUnLCAyLCB7IHVzZXJJZDogMSB9KTtcblxuICAgICAgZXhwZWN0KHJlc3VsdC5jb250aW51aXR5Tm90ZXMpLnRvSGF2ZUxlbmd0aCgyKTtcblxuICAgICAgY29uc3QgZGF5Mk5vdGVzID0gcmVzdWx0LmNvbnRpbnVpdHlOb3Rlc1sxXTtcbiAgICAgIGV4cGVjdChkYXkyTm90ZXMuY29ubmVjdGlvbnMubGVuZ3RoKS50b0JlR3JlYXRlclRoYW4oMCk7XG4gICAgICBleHBlY3QoZGF5Mk5vdGVzLmNvbm5lY3Rpb25zWzBdKS50b0NvbnRhaW4oJ01hdGhlbWF0aWNzJyk7XG4gICAgICBleHBlY3QoZGF5Mk5vdGVzLmNvbm5lY3Rpb25zWzBdKS50b0NvbnRhaW4oJ0ludHJvZHVjdGlvbiB0byBGcmFjdGlvbnMnKTtcbiAgICAgIGV4cGVjdChkYXkyTm90ZXMuY29ubmVjdGlvbnNbMF0pLnRvQ29udGFpbignRnJhY3Rpb24gT3BlcmF0aW9ucycpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBnZW5lcmF0ZSBlbWVyZ2VuY3kgYmFja3VwIHBsYW5zIGJ5IHN1YmplY3QnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBtb2NrU3ViamVjdHMgPSBbXG4gICAgICAgIHtcbiAgICAgICAgICBpZDogMSxcbiAgICAgICAgICBuYW1lOiAnTWF0aGVtYXRpY3MnLFxuICAgICAgICAgIGFjdGl2aXRpZXM6IFtcbiAgICAgICAgICAgIHsgaWQ6IDEsIHRpdGxlOiAnTWF0aCBSZXZpZXcgV29ya3NoZWV0cycsIGlzRmFsbGJhY2s6IHRydWUgfSxcbiAgICAgICAgICAgIHsgaWQ6IDIsIHRpdGxlOiAnTnVtYmVyIEdhbWVzJywgaXNGYWxsYmFjazogdHJ1ZSB9LFxuICAgICAgICAgIF0sXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICBpZDogMixcbiAgICAgICAgICBuYW1lOiAnTGFuZ3VhZ2UgQXJ0cycsXG4gICAgICAgICAgYWN0aXZpdGllczogW3sgaWQ6IDMsIHRpdGxlOiAnU2lsZW50IFJlYWRpbmcnLCBpc0ZhbGxiYWNrOiB0cnVlIH1dLFxuICAgICAgICB9LFxuICAgICAgXTtcblxuICAgICAgLy8gTW9jayBlbXB0eSBkYXkgZGF0YVxuICAgICAgbW9ja0J1aWxkU3ViUGxhbkRhdGEubW9ja1Jlc29sdmVkVmFsdWUoe1xuICAgICAgICBkYXRlOiAnMjAyNC0wMS0xNScsXG4gICAgICAgIHNjaGVkdWxlOiBbXSxcbiAgICAgICAgcHVsbE91dHM6IFtdLFxuICAgICAgICBjb250YWN0czoge30sXG4gICAgICB9KTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZXh0cmFjdFdlZWtseVBsYW4oJzIwMjQtMDEtMTUnLCAxLCB7IHVzZXJJZDogMSB9KTtcblxuICAgICAgZXhwZWN0KHJlc3VsdC5lbWVyZ2VuY3lCYWNrdXBQbGFucykudG9IYXZlTGVuZ3RoKDIpO1xuXG4gICAgICBjb25zdCBtYXRoUGxhbiA9IHJlc3VsdC5lbWVyZ2VuY3lCYWNrdXBQbGFucy5maW5kKChwKSA9PiBwLnN1YmplY3QgPT09ICdNYXRoZW1hdGljcycpO1xuICAgICAgZXhwZWN0KG1hdGhQbGFuKS50b0JlRGVmaW5lZCgpO1xuICAgICAgZXhwZWN0KG1hdGhQbGFuPy5hY3Rpdml0aWVzKS50b0NvbnRhaW4oJ01hdGggUmV2aWV3IFdvcmtzaGVldHMnKTtcbiAgICAgIGV4cGVjdChtYXRoUGxhbj8uYWN0aXZpdGllcykudG9Db250YWluKCdOdW1iZXIgR2FtZXMnKTtcbiAgICAgIGV4cGVjdChtYXRoUGxhbj8ubWF0ZXJpYWxzKS50b0NvbnRhaW4oJ01hdGggbWFuaXB1bGF0aXZlcycpO1xuXG4gICAgICBjb25zdCBsYW5nUGxhbiA9IHJlc3VsdC5lbWVyZ2VuY3lCYWNrdXBQbGFucy5maW5kKChwKSA9PiBwLnN1YmplY3QgPT09ICdMYW5ndWFnZSBBcnRzJyk7XG4gICAgICBleHBlY3QobGFuZ1BsYW4pLnRvQmVEZWZpbmVkKCk7XG4gICAgICBleHBlY3QobGFuZ1BsYW4/LmFjdGl2aXRpZXMpLnRvQ29udGFpbignU2lsZW50IFJlYWRpbmcnKTtcbiAgICAgIGV4cGVjdChsYW5nUGxhbj8ubWF0ZXJpYWxzKS50b0NvbnRhaW4oJ1JlYWRpbmcgYm9va3MnKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgY2FsY3VsYXRlIHN1YmplY3QgaG91cnMgYW5kIHRvcGljcyBjb3JyZWN0bHknLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBtb2NrU3ViamVjdCA9IHsgaWQ6IDEsIG5hbWU6ICdNYXRoZW1hdGljcycgfTtcblxuICAgICAgY29uc3QgbW9ja0RhaWx5UGxhbiA9IHtcbiAgICAgICAgaWQ6IDEsXG4gICAgICAgIGRhdGU6IG5ldyBEYXRlKCcyMDI0LTAxLTE1JyksXG4gICAgICAgIGl0ZW1zOiBbXG4gICAgICAgICAge1xuICAgICAgICAgICAgaWQ6IDEsXG4gICAgICAgICAgICBzdGFydE1pbjogNTQwLCAvLyA5OjAwIEFNIC0gYXNzdW1pbmcgMTUtbWludXRlIHNsb3RzXG4gICAgICAgICAgICBhY3Rpdml0eToge1xuICAgICAgICAgICAgICBpZDogMSxcbiAgICAgICAgICAgICAgdGl0bGU6ICdBZGRpdGlvbicsXG4gICAgICAgICAgICAgIG1pbGVzdG9uZTogeyBzdWJqZWN0OiBtb2NrU3ViamVjdCB9LFxuICAgICAgICAgICAgICBvdXRjb21lczogW10sXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgc2xvdDogeyBzdWJqZWN0OiBtb2NrU3ViamVjdCB9LFxuICAgICAgICAgIH0sXG4gICAgICAgICAge1xuICAgICAgICAgICAgaWQ6IDIsXG4gICAgICAgICAgICBzdGFydE1pbjogNTU1LCAvLyA5OjE1IEFNXG4gICAgICAgICAgICBhY3Rpdml0eToge1xuICAgICAgICAgICAgICBpZDogMixcbiAgICAgICAgICAgICAgdGl0bGU6ICdTdWJ0cmFjdGlvbicsXG4gICAgICAgICAgICAgIG1pbGVzdG9uZTogeyBzdWJqZWN0OiBtb2NrU3ViamVjdCB9LFxuICAgICAgICAgICAgICBvdXRjb21lczogW10sXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgc2xvdDogeyBzdWJqZWN0OiBtb2NrU3ViamVjdCB9LFxuICAgICAgICAgIH0sXG4gICAgICAgICAge1xuICAgICAgICAgICAgaWQ6IDMsXG4gICAgICAgICAgICBzdGFydE1pbjogNTcwLCAvLyA5OjMwIEFNXG4gICAgICAgICAgICBhY3Rpdml0eToge1xuICAgICAgICAgICAgICBpZDogMyxcbiAgICAgICAgICAgICAgdGl0bGU6ICdXb3JkIFByb2JsZW1zJyxcbiAgICAgICAgICAgICAgbWlsZXN0b25lOiB7IHN1YmplY3Q6IG1vY2tTdWJqZWN0IH0sXG4gICAgICAgICAgICAgIG91dGNvbWVzOiBbXSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzbG90OiB7IHN1YmplY3Q6IG1vY2tTdWJqZWN0IH0sXG4gICAgICAgICAgfSxcbiAgICAgICAgXSxcbiAgICAgIH07XG5cbiAgICAgIC8vIE1vY2sgY2FsY3VsYXRpb24gZGF0YSBmb3IgdGVzdGluZyBzdWJqZWN0IGhvdXJzXG4gICAgICBtb2NrQnVpbGRTdWJQbGFuRGF0YS5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICAgIGRhdGU6ICcyMDI0LTAxLTE1JyxcbiAgICAgICAgc2NoZWR1bGU6IFtcbiAgICAgICAgICB7IHRpbWU6ICcwOTowMCcsIGFjdGl2aXR5OiAnTWF0aGVtYXRpY3MgLSBBZGRpdGlvbicgfSxcbiAgICAgICAgICB7IHRpbWU6ICcwOToxNScsIGFjdGl2aXR5OiAnTWF0aGVtYXRpY3MgLSBTdWJ0cmFjdGlvbicgfSxcbiAgICAgICAgICB7IHRpbWU6ICcwOTozMCcsIGFjdGl2aXR5OiAnTWF0aGVtYXRpY3MgLSBXb3JkIFByb2JsZW1zJyB9XG4gICAgICAgIF0sXG4gICAgICAgIHB1bGxPdXRzOiBbXSxcbiAgICAgICAgY29udGFjdHM6IHt9LFxuICAgICAgICBvdXRjb21lczogW1xuICAgICAgICAgIHsgY29kZTogJ00xLjEnLCBkZXNjcmlwdGlvbjogJ0FkZCBhbmQgc3VidHJhY3QnLCBzdWJqZWN0OiAnTWF0aGVtYXRpY3MnIH1cbiAgICAgICAgXVxuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGV4dHJhY3RXZWVrbHlQbGFuKCcyMDI0LTAxLTE1JywgMSwgeyB1c2VySWQ6IDEgfSk7XG5cbiAgICAgIGNvbnN0IG1hdGhTdWJqZWN0ID0gcmVzdWx0LndlZWtseU92ZXJ2aWV3LnN1YmplY3RzLmZpbmQoKHMpID0+IHMubmFtZSA9PT0gJ01hdGhlbWF0aWNzJyk7XG4gICAgICBleHBlY3QobWF0aFN1YmplY3QpLnRvQmVEZWZpbmVkKCk7XG4gICAgICBleHBlY3QobWF0aFN1YmplY3Q/LnRvdGFsSG91cnMpLnRvQmUoMC43NSk7IC8vIDMgc2xvdHMgw5cgMC4yNSBob3VycyBlYWNoXG4gICAgICBleHBlY3QobWF0aFN1YmplY3Q/LmtleVRvcGljcykudG9Db250YWluKCdBZGRpdGlvbicpO1xuICAgICAgZXhwZWN0KG1hdGhTdWJqZWN0Py5rZXlUb3BpY3MpLnRvQ29udGFpbignU3VidHJhY3Rpb24nKTtcbiAgICAgIGV4cGVjdChtYXRoU3ViamVjdD8ua2V5VG9waWNzKS50b0NvbnRhaW4oJ1dvcmQgUHJvYmxlbXMnKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIGVtcHR5IGRheXMgZ3JhY2VmdWxseScsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIE1vY2sgZW1wdHkgZGF5XG4gICAgICBtb2NrQnVpbGRTdWJQbGFuRGF0YS5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICAgIGRhdGU6ICcyMDI0LTAxLTE1JyxcbiAgICAgICAgc2NoZWR1bGU6IFtdLFxuICAgICAgICBwdWxsT3V0czogW10sXG4gICAgICAgIGNvbnRhY3RzOiB7fSxcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBleHRyYWN0V2Vla2x5UGxhbignMjAyNC0wMS0xNScsIDMsIHsgdXNlcklkOiAxIH0pO1xuXG4gICAgICBleHBlY3QocmVzdWx0LnN0YXJ0RGF0ZSkudG9CZSgnMjAyNC0wMS0xNScpO1xuICAgICAgZXhwZWN0KHJlc3VsdC5kYXlzKS50b0hhdmVMZW5ndGgoMyk7XG4gICAgICBleHBlY3QocmVzdWx0LndlZWtseU92ZXJ2aWV3LnN1YmplY3RzKS50b0hhdmVMZW5ndGgoMCk7XG4gICAgICBleHBlY3QocmVzdWx0LndlZWtseU92ZXJ2aWV3Lm1pbGVzdG9uZXMpLnRvSGF2ZUxlbmd0aCgwKTtcbiAgICAgIGV4cGVjdChyZXN1bHQuY29udGludWl0eU5vdGVzKS50b0hhdmVMZW5ndGgoMyk7XG4gICAgICBleHBlY3QocmVzdWx0LmVtZXJnZW5jeUJhY2t1cFBsYW5zKS50b0hhdmVMZW5ndGgoMCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHJlc3BlY3QgdXNlciBvcHRpb25zIGZvciBkYXRhIGluY2x1c2lvbicsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IG1vY2tEYWlseVBsYW4gPSB7XG4gICAgICAgIGlkOiAxLFxuICAgICAgICBkYXRlOiBuZXcgRGF0ZSgnMjAyNC0wMS0xNScpLFxuICAgICAgICBpdGVtczogW10sXG4gICAgICB9O1xuXG4gICAgICAvLyBNb2NrIGZvciB1c2VyIG9wdGlvbnMgdGVzdFxuICAgICAgbW9ja0J1aWxkU3ViUGxhbkRhdGEubW9ja1Jlc29sdmVkVmFsdWUoe1xuICAgICAgICBkYXRlOiAnMjAyNC0wMS0xNScsXG4gICAgICAgIHNjaGVkdWxlOiBbeyB0aW1lOiAnMDk6MDAnLCBhY3Rpdml0eTogJ1Rlc3QgQWN0aXZpdHknIH1dLFxuICAgICAgICBwdWxsT3V0czogW10sXG4gICAgICAgIGNvbnRhY3RzOiB7fSxcbiAgICAgICAgZ29hbHM6IFt7IGlkOiAxLCB0ZXh0OiAnVGVzdCBnb2FsJywgc3RhdHVzOiAnYWN0aXZlJyB9XSxcbiAgICAgICAgcm91dGluZXM6IFt7IGlkOiAxLCB0aXRsZTogJ01vcm5pbmcgcm91dGluZScsIGRlc2NyaXB0aW9uOiAnVGVzdCcsIGNhdGVnb3J5OiAnbW9ybmluZycgfV1cbiAgICAgIH0pO1xuXG4gICAgICAvLyBUZXN0IHdpdGggaW5jbHVkZUdvYWxzOiBmYWxzZVxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZXh0cmFjdFdlZWtseVBsYW4oJzIwMjQtMDEtMTUnLCAxLCB7XG4gICAgICAgIHVzZXJJZDogMSxcbiAgICAgICAgaW5jbHVkZUdvYWxzOiBmYWxzZSxcbiAgICAgICAgaW5jbHVkZVJvdXRpbmVzOiBmYWxzZSxcbiAgICAgICAgaW5jbHVkZVBsYW5zOiBmYWxzZSxcbiAgICAgIH0pO1xuXG4gICAgICBleHBlY3QocmVzdWx0LmRheXNbMF0uZ29hbHMpLnRvQmVVbmRlZmluZWQoKTtcbiAgICAgIGV4cGVjdChyZXN1bHQuZGF5c1swXS5yb3V0aW5lcykudG9CZVVuZGVmaW5lZCgpO1xuICAgIH0pO1xuICB9KTtcbn0pO1xuIl0sInZlcnNpb24iOjN9