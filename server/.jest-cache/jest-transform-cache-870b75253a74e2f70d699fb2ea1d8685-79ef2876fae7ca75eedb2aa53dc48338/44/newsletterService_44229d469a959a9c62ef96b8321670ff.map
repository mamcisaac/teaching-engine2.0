{"version":3,"names":["cov_25rcvv7gc","actualCoverage","OpenAI","openai","s","apiKey","b","process","env","OPENAI_API_KEY","generateNewsletterContent","students","daybookEntries","fromDate","toDate","tone","focusAreas","options","f","dateRange","toLocaleDateString","studentNames","map","firstName","join","learningActivities","entry","date","notes","whatWorked","studentEngagement","studentSuccesses","studentProgress","student","name","artifacts","includeArtifacts","reflections","includeReflections","toneDescriptions","friendly","formal","informative","systemPrompt","length","userPrompt","JSON","stringify","includeLearningGoals","includeUpcomingEvents","response","chat","completions","create","model","messages","role","content","temperature","response_format","type","choices","message","Error","parsed","parse","sections","section","index","id","Date","now","title","titleFr","contentFr","isEditable","order","error","console","generateFallbackNewsletter","_tone","push"],"sources":["/Users/michaelmcisaac/GitHub/teaching-engine2.0/server/src/services/newsletterService.ts"],"sourcesContent":["import { Student, DaybookEntry, StudentArtifact, StudentReflection } from '@teaching-engine/database';\nimport OpenAI from 'openai';\n\n// Newsletter types\nexport type NewsletterTone = 'friendly' | 'formal' | 'informative';\n\nexport interface NewsletterSection {\n  id: string;\n  title: string;\n  titleFr: string;\n  content: string;\n  contentFr: string;\n  isEditable: boolean;\n  order: number;\n}\n\nconst openai = new OpenAI({\n  apiKey: process.env.OPENAI_API_KEY || '',\n});\n\ninterface NewsletterGenerationOptions {\n  students: (Student & { artifacts: StudentArtifact[]; reflections: StudentReflection[] })[];\n  daybookEntries: DaybookEntry[];\n  fromDate: Date;\n  toDate: Date;\n  tone: NewsletterTone;\n  focusAreas?: string[];\n  options: {\n    includeArtifacts: boolean;\n    includeReflections: boolean;\n    includeLearningGoals: boolean;\n    includeUpcomingEvents: boolean;\n  };\n}\n\nexport async function generateNewsletterContent({\n  students,\n  daybookEntries,\n  fromDate,\n  toDate,\n  tone,\n  focusAreas = [],\n  options,\n}: NewsletterGenerationOptions) {\n  const dateRange = `${fromDate.toLocaleDateString()} to ${toDate.toLocaleDateString()}`;\n  const studentNames = students.map(s => s.firstName).join(', ');\n\n  // Prepare context for AI\n  const learningActivities = daybookEntries.map(entry => ({\n    date: entry.date,\n    notes: entry.notes,\n    whatWorked: entry.whatWorked,\n    studentEngagement: entry.studentEngagement,\n    studentSuccesses: entry.studentSuccesses,\n  }));\n\n  const studentProgress = students.map(student => ({\n    name: student.firstName,\n    artifacts: options.includeArtifacts ? student.artifacts : [],\n    reflections: options.includeReflections ? student.reflections : [],\n  }));\n\n  const toneDescriptions = {\n    friendly: 'warm, approachable, and conversational',\n    formal: 'professional, structured, and detailed',\n    informative: 'clear, factual, and educational',\n  };\n\n  const systemPrompt = `You are an elementary school teacher creating a newsletter for parents. \nYour tone should be ${toneDescriptions[tone]}. \nCreate bilingual content (English and French) for each section.\nFocus on: ${focusAreas.length > 0 ? focusAreas.join(', ') : 'overall student progress and activities'}.`;\n\n  const userPrompt = `Create a parent newsletter for the period ${dateRange} for students: ${studentNames}.\n\nLearning Activities:\n${JSON.stringify(learningActivities, null, 2)}\n\n${options.includeArtifacts || options.includeReflections ? `Student Progress:\n${JSON.stringify(studentProgress, null, 2)}` : ''}\n\nPlease create the following sections:\n1. Introduction/Overview\n2. Academic Highlights\n3. Learning Activities & Projects\n${options.includeArtifacts ? '4. Student Work Showcase' : ''}\n${options.includeReflections ? '5. Student Reflections' : ''}\n${options.includeLearningGoals ? '6. Upcoming Learning Goals' : ''}\n${options.includeUpcomingEvents ? '7. Important Dates & Events' : ''}\n8. Home Support Tips\n9. Closing Message\n\nFor each section, provide:\n- title (English)\n- titleFr (French)\n- content (English, using simple HTML for formatting)\n- contentFr (French, using simple HTML for formatting)\n\nFormat the response as a JSON array of sections.`;\n\n  try {\n    const response = await openai.chat.completions.create({\n      model: 'gpt-4o-mini',\n      messages: [\n        { role: 'system', content: systemPrompt },\n        { role: 'user', content: userPrompt },\n      ],\n      temperature: tone === 'friendly' ? 0.8 : tone === 'formal' ? 0.5 : 0.6,\n      response_format: { type: 'json_object' },\n    });\n\n    const content = response.choices[0]?.message?.content;\n    if (!content) {\n      throw new Error('No content generated');\n    }\n\n    const parsed = JSON.parse(content);\n    const sections: NewsletterSection[] = (parsed.sections || []).map((section: { title?: string; titleFr?: string; content?: string; contentFr?: string }, index: number) => ({\n      id: `section-${Date.now()}-${index}`,\n      title: section.title || 'Section',\n      titleFr: section.titleFr || 'Section',\n      content: section.content || '',\n      contentFr: section.contentFr || '',\n      isEditable: true,\n      order: index,\n    }));\n\n    return { sections };\n  } catch (error) {\n    console.error('Error generating newsletter content:', error);\n    \n    // Fallback to template-based generation\n    return generateFallbackNewsletter({\n      dateRange,\n      studentNames,\n      tone,\n      focusAreas,\n      options,\n    });\n  }\n}\n\nfunction generateFallbackNewsletter({\n  dateRange,\n  studentNames,\n  tone: _tone,\n  focusAreas,\n  options,\n}: {\n  dateRange: string;\n  studentNames: string;\n  tone: NewsletterTone;\n  focusAreas: string[];\n  options: {\n    includeArtifacts: boolean;\n    includeReflections: boolean;\n    includeLearningGoals: boolean;\n    includeUpcomingEvents: boolean;\n  };\n}): { sections: NewsletterSection[] } {\n  const sections: NewsletterSection[] = [];\n  let order = 0;\n\n  // Introduction\n  sections.push({\n    id: `section-intro-${Date.now()}`,\n    title: 'Newsletter Introduction',\n    titleFr: 'Introduction du bulletin',\n    content: `<p>Dear Parents and Guardians,</p>\n<p>Welcome to our classroom newsletter for ${dateRange}. This update covers the learning journey of ${studentNames}.</p>`,\n    contentFr: `<p>Chers parents et tuteurs,</p>\n<p>Bienvenue à notre bulletin de classe pour ${dateRange}. Cette mise à jour couvre le parcours d'apprentissage de ${studentNames}.</p>`,\n    isEditable: true,\n    order: order++,\n  });\n\n  // Academic Highlights\n  sections.push({\n    id: `section-highlights-${Date.now()}`,\n    title: 'Academic Highlights',\n    titleFr: 'Points saillants académiques',\n    content: `<p>This period, our students have been working on various subjects and activities. ${focusAreas.length > 0 ? `We particularly focused on: ${focusAreas.join(', ')}.` : ''}</p>`,\n    contentFr: `<p>Au cours de cette période, nos élèves ont travaillé sur divers sujets et activités. ${focusAreas.length > 0 ? `Nous nous sommes particulièrement concentrés sur : ${focusAreas.join(', ')}.` : ''}</p>`,\n    isEditable: true,\n    order: order++,\n  });\n\n  // Learning Activities\n  sections.push({\n    id: `section-activities-${Date.now()}`,\n    title: 'Learning Activities & Projects',\n    titleFr: 'Activités d\\'apprentissage et projets',\n    content: `<p>Students engaged in hands-on learning experiences including group projects, individual assignments, and collaborative activities.</p>`,\n    contentFr: `<p>Les élèves ont participé à des expériences d'apprentissage pratiques comprenant des projets de groupe, des devoirs individuels et des activités collaboratives.</p>`,\n    isEditable: true,\n    order: order++,\n  });\n\n  if (options.includeLearningGoals) {\n    sections.push({\n      id: `section-goals-${Date.now()}`,\n      title: 'Upcoming Learning Goals',\n      titleFr: 'Objectifs d\\'apprentissage à venir',\n      content: `<p>In the coming weeks, we will be focusing on developing key skills and exploring new concepts across our curriculum.</p>`,\n      contentFr: `<p>Dans les semaines à venir, nous nous concentrerons sur le développement de compétences clés et l'exploration de nouveaux concepts dans notre programme.</p>`,\n      isEditable: true,\n      order: order++,\n    });\n  }\n\n  // Home Support\n  sections.push({\n    id: `section-support-${Date.now()}`,\n    title: 'How You Can Help at Home',\n    titleFr: 'Comment vous pouvez aider à la maison',\n    content: `<p>You can support your child's learning by:</p>\n<ul>\n  <li>Reading together daily</li>\n  <li>Practicing math facts during everyday activities</li>\n  <li>Encouraging questions and curiosity</li>\n  <li>Providing a quiet study space</li>\n</ul>`,\n    contentFr: `<p>Vous pouvez soutenir l'apprentissage de votre enfant en :</p>\n<ul>\n  <li>Lisant ensemble tous les jours</li>\n  <li>Pratiquant les faits mathématiques lors des activités quotidiennes</li>\n  <li>Encourageant les questions et la curiosité</li>\n  <li>Fournissant un espace d'étude calme</li>\n</ul>`,\n    isEditable: true,\n    order: order++,\n  });\n\n  // Closing\n  sections.push({\n    id: `section-closing-${Date.now()}`,\n    title: 'Closing Message',\n    titleFr: 'Message de clôture',\n    content: `<p>Thank you for your continued support. Please don't hesitate to reach out if you have any questions or concerns.</p>\n<p>Best regards,<br>Your Teaching Team</p>`,\n    contentFr: `<p>Merci pour votre soutien continu. N'hésitez pas à nous contacter si vous avez des questions ou des préoccupations.</p>\n<p>Cordialement,<br>Votre équipe enseignante</p>`,\n    isEditable: true,\n    order: order++,\n  });\n\n  return { sections };\n}"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","ignoreList":[]}