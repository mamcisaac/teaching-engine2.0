{"file":"/Users/michaelmcisaac/GitHub/teaching-engine2.0/server/src/services/connectors/oerConnector.ts","mappings":"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","names":[],"sources":["/Users/michaelmcisaac/GitHub/teaching-engine2.0/server/src/services/connectors/oerConnector.ts"],"sourcesContent":["import { ExternalActivity } from '@teaching-engine/database';\nimport { BaseConnector } from './baseConnector';\nimport { SearchParams } from '../activityDiscoveryService';\n\ninterface OERResource {\n  id: number;\n  title: string;\n  abstract?: string;\n  description?: string;\n  url?: string;\n  thumbnail_url?: string;\n  material_types?: string[];\n  grade_levels?: string[];\n  subjects?: string[];\n  keywords?: string[];\n  languages?: string[];\n  language?: string;\n  authors?: string[];\n  license?: string;\n  rating?: number;\n  reviews_count?: number;\n  visits?: number;\n  requires_internet?: boolean;\n  learning_objectives?: string[];\n  standards?: OERStandard[];\n}\n\ninterface OERSearchResponse {\n  meta: {\n    pagination: {\n      count: number;\n      page: number;\n      per_page: number;\n    };\n  };\n  results: OERResource[];\n}\n\ninterface OERStandard {\n  notation?: string;\n  code?: string;\n}\n\n/**\n * Open Educational Resources (OER) connector\n * Searches OER Commons and other open educational resource repositories\n * Free, openly licensed educational materials\n */\nexport class OERConnector extends BaseConnector {\n  private apiKey: string;\n  private baseUrl = 'https://www.oercommons.org/api/v1';\n\n  constructor() {\n    super('oer');\n    this.apiKey = process.env.OER_API_KEY || '';\n\n    if (!this.apiKey) {\n      console.warn('OER API key not configured. OER search will not be available.');\n    }\n  }\n\n  async search(params: SearchParams): Promise<ExternalActivity[]> {\n    if (!this.apiKey) return [];\n\n    try {\n      // Build OER search parameters\n      const searchParams = new URLSearchParams({\n        q: params.query || '',\n        limit: String(params.limit || 20),\n        offset: String(params.offset || 0),\n        has_materials: 'true',\n      });\n\n      // Add grade level filter\n      if (params.grade) {\n        searchParams.append('grade_level', this.mapGradeToOER(params.grade));\n      }\n\n      // Add subject filter\n      if (params.subject) {\n        searchParams.append('subject', this.mapSubjectToOER(params.subject));\n      }\n\n      const url = `${this.baseUrl}/search?${searchParams.toString()}`;\n\n      const response = await this.fetchWithTimeout(url, {\n        headers: {\n          Authorization: `Bearer ${this.apiKey}`,\n          Accept: 'application/json',\n        },\n      }, 30000); // 30 second timeout\n\n      if (!response.ok) {\n        throw new Error(`OER API error: ${response.statusText}`);\n      }\n\n      const data: OERSearchResponse = await response.json();\n\n      // Transform OER results to our format\n      const activities: ExternalActivity[] = data.results\n        .map((item: OERResource) => this.transformOERResource(item, params))\n        .filter(\n          (activity: ExternalActivity | null): activity is ExternalActivity => activity !== null,\n        );\n\n      return activities as ExternalActivity[];\n    } catch (error) {\n      console.error('OER search error:', error);\n      return [];\n    }\n  }\n\n  async getActivityDetails(externalId: string): Promise<ExternalActivity | null> {\n    if (!this.apiKey) return null;\n\n    try {\n      const url = `${this.baseUrl}/resources/${externalId}`;\n\n      const response = await this.fetchWithTimeout(url, {\n        headers: {\n          Authorization: `Bearer ${this.apiKey}`,\n          Accept: 'application/json',\n        },\n      }, 30000); // 30 second timeout\n\n      if (!response.ok) return null;\n\n      const data = await response.json();\n      return this.transformOERResource(data, {}) as ExternalActivity;\n    } catch (error) {\n      console.error('OER getActivityDetails error:', error);\n      return null;\n    }\n  }\n\n  private mapGradeToOER(grade: number): string {\n    // OER uses different grade level naming\n    if (grade === 0) return 'kindergarten';\n    if (grade >= 1 && grade <= 12) return `grade_${grade}`;\n    return 'primary';\n  }\n\n  private mapSubjectToOER(subject: string): string {\n    const subjectMap: Record<string, string> = {\n      math: 'mathematics',\n      francais: 'world_languages',\n      english: 'english_language_arts',\n      science: 'science',\n      'social-studies': 'social_studies',\n      'physical-education': 'health_physical_education',\n      arts: 'arts',\n    };\n\n    return subjectMap[subject.toLowerCase()] || subject;\n  }\n\n  private transformOERResource(\n    resource: OERResource,\n    _params: SearchParams,\n  ): Omit<ExternalActivity, 'id' | 'createdAt' | 'updatedAt'> | null {\n    if (!resource) return null;\n\n    // Determine activity type based on material types\n    const activityType = this.inferActivityTypeFromMaterialTypes(resource.material_types || []);\n\n    // Extract grade range\n    const gradeRange = this.extractGradeRangeFromOER(resource.grade_levels || []);\n\n    // Extract subject\n    const subject = this.extractSubjectFromOER(resource.subjects || []);\n\n    return this.transformToExternalActivity(\n      {} as ExternalActivity,\n      {\n        externalId: String(resource.id),\n        url: resource.url || `https://www.oercommons.org/courses/${resource.id}`,\n        title: resource.title,\n        description: resource.abstract || resource.description,\n        thumbnailUrl: resource.thumbnail_url,\n        duration: this.estimateDurationFromDescription(resource.abstract),\n        activityType,\n        gradeMin: gradeRange.min,\n        gradeMax: gradeRange.max,\n        subject: this.normalizeSubject(subject),\n        language: resource.language || 'en',\n        materials: this.extractMaterialsFromDescription(resource.abstract || ''),\n        technology: this.extractTechnologyRequirements(resource),\n        groupSize: null,\n        sourceRating: resource.rating ? resource.rating * 5 : null, // Convert to 5-star scale\n        sourceReviews: resource.reviews_count || null,\n        curriculumTags: this.extractStandardsFromOER(resource.standards || []),\n        learningGoals: resource.learning_objectives || null,\n        isFree: true,\n        license: resource.license || 'Open Educational Resource',\n        isActive: true,\n      },\n    );\n  }\n\n  private inferActivityTypeFromMaterialTypes(materialTypes: string[]): string {\n    const typeMap: Record<string, string> = {\n      video: 'video',\n      interactive: 'game',\n      worksheet: 'worksheet',\n      activity: 'handson',\n      experiment: 'experiment',\n      lesson_plan: 'worksheet',\n      assessment: 'worksheet',\n    };\n\n    for (const materialType of materialTypes) {\n      const normalized = materialType.toLowerCase();\n      if (typeMap[normalized]) {\n        return typeMap[normalized];\n      }\n    }\n\n    return 'worksheet'; // default\n  }\n\n  private extractGradeRangeFromOER(gradeLevels: string[]): { min: number; max: number } {\n    if (!gradeLevels || gradeLevels.length === 0) {\n      return { min: 1, max: 1 };\n    }\n\n    const grades: number[] = [];\n\n    for (const level of gradeLevels) {\n      if (level.includes('kindergarten')) {\n        grades.push(0);\n      } else {\n        const match = level.match(/\\d+/);\n        if (match) {\n          grades.push(parseInt(match[0]));\n        }\n      }\n    }\n\n    if (grades.length === 0) return { min: 1, max: 1 };\n\n    return {\n      min: Math.min(...grades),\n      max: Math.max(...grades),\n    };\n  }\n\n  private extractSubjectFromOER(subjects: string[]): string {\n    if (!subjects || subjects.length === 0) return 'general';\n\n    // Take the first subject and normalize it\n    return subjects[0].toLowerCase().replace(/_/g, '-');\n  }\n\n  private extractTechnologyRequirements(resource: OERResource): string[] | null {\n    const tech: string[] = [];\n\n    if (resource.requires_internet) tech.push('internet');\n    if (resource.material_types?.includes('interactive')) tech.push('ordinateur');\n    if (resource.material_types?.includes('video')) tech.push('projecteur');\n\n    return tech.length > 0 ? tech : null;\n  }\n\n  private estimateDurationFromDescription(description: string): number | null {\n    if (!description) return null;\n\n    // Look for duration mentions in description\n    const durationMatch = description.match(/(\\d+)\\s*(?:minutes?|mins?|hours?)/i);\n    if (durationMatch) {\n      return this.parseDuration(durationMatch[0]);\n    }\n\n    // Estimate based on content length\n    const wordCount = description.split(/\\s+/).length;\n    if (wordCount < 100) return 15;\n    if (wordCount < 300) return 25;\n    return 35;\n  }\n\n  private extractStandardsFromOER(standards: OERStandard[]): string[] {\n    if (!standards || standards.length === 0) return [];\n\n    return standards\n      .map((s) => s.notation || s.code)\n      .filter((s) => s)\n      .slice(0, 5); // Limit to 5 standards\n  }\n\n  private extractMaterialsFromDescription(description: string): string[] {\n    const materials = this.extractMaterials(description);\n\n    // Add common materials for open resources\n    if (materials.length === 0) {\n      materials.push('papier', 'crayons');\n    }\n\n    return materials;\n  }\n}\n"],"version":3}