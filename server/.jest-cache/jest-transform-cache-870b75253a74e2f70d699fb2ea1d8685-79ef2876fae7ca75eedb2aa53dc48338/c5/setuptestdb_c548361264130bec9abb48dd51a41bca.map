{"file":"/Users/michaelmcisaac/GitHub/teaching-engine2.0/server/tests/setup-test-db.ts","mappings":"AAAA,OAAO,EAAE,QAAQ,EAAE,MAAM,eAAe,CAAC;AACzC,OAAO,EAAE,OAAO,EAAE,MAAM,MAAM,CAAC;AAC/B,OAAO,EAAE,MAAM,EAAE,MAAM,yBAAyB,CAAC;AAEjD,yCAAyC;AACzC,OAAO,EAAE,MAAM,EAAE,CAAC;AAElB,MAAM,CAAC,OAAO,CAAC,KAAK,UAAU,KAAK;IACjC,uCAAuC;IACvC,MAAM,QAAQ,GAAG,cAAc,CAAC;IAChC,MAAM,MAAM,CAAC,kBAAkB,CAAC,QAAQ,CAAC,CAAC;IAE1C,MAAM,IAAI,GAAG,OAAO,CAAC,OAAO,CAAC,GAAG,EAAE,EAAE,IAAI,CAAC,CAAC;IAE1C,IAAI,CAAC;QACH,yBAAyB;QACzB,OAAO,CAAC,GAAG,CAAC,6BAA6B,CAAC,CAAC;QAC3C,QAAQ,CAAC,qDAAqD,EAAE;YAC9D,KAAK,EAAE,SAAS;YAChB,GAAG,EAAE,IAAI;SACV,CAAC,CAAC;QAEH,qCAAqC;QACrC,OAAO,CAAC,GAAG,CAAC,4BAA4B,CAAC,CAAC;QAC1C,QAAQ,CACN,sFAAsF,EACtF;YACE,KAAK,EAAE,SAAS;YAChB,GAAG,EAAE,IAAI;SACV,CACF,CAAC;QAEF,yBAAyB;QACzB,OAAO,CAAC,GAAG,CAAC,0BAA0B,CAAC,CAAC;QACxC,QAAQ,CAAC,wDAAwD,EAAE;YACjE,KAAK,EAAE,SAAS;YAChB,GAAG,EAAE,IAAI;SACV,CAAC,CAAC;QAEH,OAAO,CAAC,GAAG,CAAC,4CAA4C,CAAC,CAAC;IAC5D,CAAC;IAAC,OAAO,KAAK,EAAE,CAAC;QACf,OAAO,CAAC,KAAK,CAAC,iCAAiC,EAAE,KAAK,CAAC,CAAC;QACxD,MAAM,KAAK,CAAC;IACd,CAAC;AACH,CAAC","names":[],"sources":["/Users/michaelmcisaac/GitHub/teaching-engine2.0/server/tests/setup-test-db.ts"],"sourcesContent":["import { execSync } from 'child_process';\nimport { resolve } from 'path';\nimport { testDb } from './test-database-manager';\n\n// Export testDb for use in jest.setup.ts\nexport { testDb };\n\nexport default async function setup() {\n  // Initialize the test database manager\n  const workerId = 'global-setup';\n  await testDb.createTestDatabase(workerId);\n\n  const root = resolve(process.cwd(), '..');\n\n  try {\n    // Generate Prisma client\n    console.log('Generating Prisma client...');\n    execSync('pnpm --filter @teaching-engine/database db:generate', {\n      stdio: 'inherit',\n      cwd: root,\n    });\n\n    // Reset and push the database schema\n    console.log('Resetting test database...');\n    execSync(\n      'pnpm --filter @teaching-engine/database prisma db push --force-reset --skip-generate',\n      {\n        stdio: 'inherit',\n        cwd: root,\n      },\n    );\n\n    // Seed the test database\n    console.log('Seeding test database...');\n    execSync('pnpm --filter @teaching-engine/database prisma db seed', {\n      stdio: 'inherit',\n      cwd: root,\n    });\n\n    console.log('Test database setup completed successfully');\n  } catch (error) {\n    console.error('Error setting up test database:', error);\n    throw error;\n  }\n}\n"],"version":3}