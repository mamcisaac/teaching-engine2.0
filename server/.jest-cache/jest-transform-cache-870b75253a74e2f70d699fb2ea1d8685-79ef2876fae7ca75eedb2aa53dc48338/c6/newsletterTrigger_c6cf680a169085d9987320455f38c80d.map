{"version":3,"names":["cov_23rfy7unmc","actualCoverage","cron","TERM_MIDPOINTS","s","term","date","Date","checkNewsletterTriggers","midpoints","b","f","todayStr","toISOString","slice","mp","console","warn","scheduleNewsletterTriggers","schedule"],"sources":["/Users/michaelmcisaac/GitHub/teaching-engine2.0/server/src/jobs/newsletterTrigger.ts"],"sourcesContent":["import cron from 'node-cron';\n\nexport interface TermMidpoint {\n  term: string;\n  date: Date;\n}\n\nexport const TERM_MIDPOINTS: TermMidpoint[] = [\n  { term: 'Term 1', date: new Date('2025-10-15') },\n  { term: 'Term 2', date: new Date('2025-02-14') },\n  { term: 'Term 3', date: new Date('2025-05-05') },\n];\n\nexport async function checkNewsletterTriggers(midpoints: TermMidpoint[] = TERM_MIDPOINTS) {\n  // DISABLED: Notification model has been archived\n  // TODO: Implement using ParentMessage for newsletter notifications\n  const todayStr = new Date().toISOString().slice(0, 10);\n  for (const mp of midpoints) {\n    if (mp.date.toISOString().slice(0, 10) === todayStr) {\n      console.warn(`Newsletter trigger for ${mp.term} - Notification model archived`);\n    }\n  }\n}\n\nexport function scheduleNewsletterTriggers() {\n  cron.schedule('0 7 * * *', () => checkNewsletterTriggers());\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IAsBC;IAAAA,cAAA,YAAAA,CAAA;MAAA,OAAAC,cAAA;IAAA;EAAA;EAAA,OAAAA,cAAA;AAAA;AAAAD,cAAA;AAtBD,OAAOE,IAAI,MAAM,WAAW;AAO5B,OAAO,MAAMC,cAAc;AAAA;AAAA,CAAAH,cAAA,GAAAI,CAAA,OAAmB,CAC5C;EAAEC,IAAI,EAAE,QAAQ;EAAEC,IAAI,EAAE,IAAIC,IAAI,CAAC,YAAY;AAAC,CAAE,EAChD;EAAEF,IAAI,EAAE,QAAQ;EAAEC,IAAI,EAAE,IAAIC,IAAI,CAAC,YAAY;AAAC,CAAE,EAChD;EAAEF,IAAI,EAAE,QAAQ;EAAEC,IAAI,EAAE,IAAIC,IAAI,CAAC,YAAY;AAAC,CAAE,CACjD;AAED,OAAO,eAAeC,uBAAuBA,CAACC,SAAA;AAAA;AAAA,CAAAT,cAAA,GAAAU,CAAA,UAA4BP,cAAc;EAAA;EAAAH,cAAA,GAAAW,CAAA;EACtF;EACA;EACA,MAAMC,QAAQ;EAAA;EAAA,CAAAZ,cAAA,GAAAI,CAAA,OAAG,IAAIG,IAAI,EAAE,CAACM,WAAW,EAAE,CAACC,KAAK,CAAC,CAAC,EAAE,EAAE,CAAC;EAAC;EAAAd,cAAA,GAAAI,CAAA;EACvD,KAAK,MAAMW,EAAE,IAAIN,SAAS,EAAE;IAAA;IAAAT,cAAA,GAAAI,CAAA;IAC1B,IAAIW,EAAE,CAACT,IAAI,CAACO,WAAW,EAAE,CAACC,KAAK,CAAC,CAAC,EAAE,EAAE,CAAC,KAAKF,QAAQ,EAAE;MAAA;MAAAZ,cAAA,GAAAU,CAAA;MAAAV,cAAA,GAAAI,CAAA;MACnDY,OAAO,CAACC,IAAI,CAAC,0BAA0BF,EAAE,CAACV,IAAI,gCAAgC,CAAC;IACjF,CAAC;IAAA;IAAA;MAAAL,cAAA,GAAAU,CAAA;IAAA;EACH;AACF;AAEA,OAAM,SAAUQ,0BAA0BA,CAAA;EAAA;EAAAlB,cAAA,GAAAW,CAAA;EAAAX,cAAA,GAAAI,CAAA;EACxCF,IAAI,CAACiB,QAAQ,CAAC,WAAW,EAAE,MAAM;IAAA;IAAAnB,cAAA,GAAAW,CAAA;IAAAX,cAAA,GAAAI,CAAA;IAAA,OAAAI,uBAAuB,EAAE;EAAF,CAAE,CAAC;AAC7D","ignoreList":[]}