4573abe2d3ef14411d2c682b554665e7
import { describe, test, expect, beforeAll, afterAll, beforeEach } from '@jest/globals';
import request from 'supertest';
import { app } from '../../src/index';
import { prisma } from '../../src/prisma';
describe('ETFO Planning Integration Tests', () => {
    let authToken;
    let userId;
    let testEmail;
    let testCurriculumExpectationId;
    let testLongRangePlanId;
    let testUnitPlanId;
    let unitPlanExpectationId;
    let lessonPlanExpectationId;
    let aiTestExpectationId;
    let flowTestExpectationId;
    beforeAll(async () => {
        // Create test user manually with unique email
        const bcrypt = (await import('bcryptjs')).default;
        const hashedPassword = await bcrypt.hash('testpassword123', 10);
        const timestamp = Date.now();
        testEmail = `etfo-test-${timestamp}@example.com`;
        // Clean up any existing user with this email first
        await prisma.user.deleteMany({
            where: { email: testEmail }
        });
        const user = await prisma.user.create({
            data: {
                email: testEmail,
                password: hashedPassword,
                name: 'ETFO Tester',
                role: 'teacher',
            },
        });
        userId = user.id;
        // Ensure the transaction is committed
        await prisma.$disconnect();
        await prisma.$connect();
        const loginResponse = await request(app)
            .post('/api/login')
            .send({
            email: testEmail,
            password: 'testpassword123',
        });
        if (loginResponse.status !== 200) {
            throw new Error(`Login failed: ${loginResponse.status} ${JSON.stringify(loginResponse.body)}`);
        }
        authToken = loginResponse.body.token;
        if (!authToken) {
            throw new Error('No auth token received from login');
        }
    });
    afterAll(async () => {
        // Clean up test data in reverse dependency order
        if (userId) {
            try {
                // Delete in reverse order of dependencies
                await prisma.daybookEntryExpectation.deleteMany({
                    where: { daybookEntry: { userId } },
                });
                await prisma.daybookEntry.deleteMany({ where: { userId } });
                await prisma.eTFOLessonPlanExpectation.deleteMany({
                    where: { lessonPlan: { userId } },
                });
                await prisma.eTFOLessonPlanResource.deleteMany({
                    where: { lessonPlan: { userId } },
                });
                await prisma.eTFOLessonPlan.deleteMany({ where: { userId } });
                await prisma.unitPlanExpectation.deleteMany({
                    where: { unitPlan: { userId } },
                });
                await prisma.unitPlanResource.deleteMany({
                    where: { unitPlan: { userId } },
                });
                await prisma.unitPlan.deleteMany({ where: { userId } });
                await prisma.longRangePlanExpectation.deleteMany({
                    where: { longRangePlan: { userId } },
                });
                await prisma.longRangePlan.deleteMany({ where: { userId } });
                // Delete curriculum expectations created by this user's imports
                await prisma.curriculumExpectation.deleteMany({
                    where: { import: { userId } },
                });
                await prisma.curriculumImport.deleteMany({ where: { userId } });
                await prisma.user.delete({ where: { id: userId } });
            }
            catch (error) {
                console.warn('Failed to delete test data:', error);
            }
        }
        await prisma.$disconnect();
    });
    beforeEach(async () => {
        // Clean up any existing test data for this user only
        if (!userId)
            return;
        // Delete in reverse order of dependencies to avoid foreign key violations
        await prisma.daybookEntryExpectation.deleteMany({
            where: { daybookEntry: { userId } },
        });
        await prisma.daybookEntry.deleteMany({ where: { userId } });
        await prisma.eTFOLessonPlanExpectation.deleteMany({
            where: { lessonPlan: { userId } },
        });
        await prisma.eTFOLessonPlanResource.deleteMany({
            where: { lessonPlan: { userId } },
        });
        await prisma.eTFOLessonPlan.deleteMany({ where: { userId } });
        await prisma.unitPlanExpectation.deleteMany({
            where: { unitPlan: { userId } },
        });
        await prisma.unitPlanResource.deleteMany({
            where: { unitPlan: { userId } },
        });
        await prisma.unitPlan.deleteMany({ where: { userId } });
        await prisma.longRangePlanExpectation.deleteMany({
            where: { longRangePlan: { userId } },
        });
        await prisma.longRangePlan.deleteMany({ where: { userId } });
        // Delete curriculum expectations created by this user's imports
        await prisma.curriculumExpectation.deleteMany({
            where: {
                import: { userId }
            }
        });
    });
    describe('Curriculum Expectations', () => {
        test('should create a curriculum expectation', async () => {
            const response = await request(app)
                .post('/api/curriculum-expectations')
                .set('Authorization', `Bearer ${authToken}`)
                .send({
                code: `TEST.1.1.${Date.now()}`,
                description: 'Test expectation for ETFO planning',
                strand: 'Test Strand',
                grade: 1,
                subject: 'Mathematics',
            });
            expect(response.status).toBe(201);
            expect(response.body.code).toContain('TEST.1.1');
            expect(response.body.description).toBe('Test expectation for ETFO planning');
            testCurriculumExpectationId = response.body.id;
        });
        test('should search curriculum expectations', async () => {
            // Create test expectation first
            await request(app)
                .post('/api/curriculum-expectations')
                .set('Authorization', `Bearer ${authToken}`)
                .send({
                code: `SEARCH.1.1.${Date.now()}`,
                description: 'Searchable test expectation',
                strand: 'Search Strand',
                grade: 1,
                subject: 'Mathematics',
            });
            const response = await request(app)
                .get('/api/curriculum-expectations?search=Searchable')
                .set('Authorization', `Bearer ${authToken}`);
            expect(response.status).toBe(200);
            expect(response.body.length).toBeGreaterThan(0);
            expect(response.body[0].description).toContain('Searchable');
        });
    });
    describe('Long-Range Plans', () => {
        beforeEach(async () => {
            // Create test curriculum expectation
            const expectationResponse = await request(app)
                .post('/api/curriculum-expectations')
                .set('Authorization', `Bearer ${authToken}`)
                .send({
                code: `LRP.1.1.${Date.now()}`,
                description: 'Long-range plan test expectation',
                strand: 'Test Strand',
                grade: 1,
                subject: 'Mathematics',
            });
            if (expectationResponse.status !== 201) {
                throw new Error(`Failed to create test expectation: ${expectationResponse.status} ${JSON.stringify(expectationResponse.body)}`);
            }
            testCurriculumExpectationId = expectationResponse.body.id;
        });
        test('should create a long-range plan', async () => {
            const response = await request(app)
                .post('/api/long-range-plans')
                .set('Authorization', `Bearer ${authToken}`)
                .send({
                title: 'Grade 1 Mathematics - Fall Term',
                academicYear: '2024-2025',
                term: 'Fall',
                grade: 1,
                subject: 'Mathematics',
                description: 'Comprehensive math program for Grade 1',
                goals: 'Develop number sense and basic operations',
                themes: ['Number Sense', 'Patterns', 'Measurement'],
                expectationIds: [testCurriculumExpectationId],
            });
            expect(response.status).toBe(201);
            expect(response.body.title).toBe('Grade 1 Mathematics - Fall Term');
            expect(response.body.expectations).toHaveLength(1);
            testLongRangePlanId = response.body.id;
        });
        test('should get all long-range plans for user', async () => {
            // Create test plan first
            const createResponse = await request(app)
                .post('/api/long-range-plans')
                .set('Authorization', `Bearer ${authToken}`)
                .send({
                title: 'Test Plan for Retrieval',
                academicYear: '2024-2025',
                grade: 1,
                subject: 'Mathematics',
            });
            expect(createResponse.status).toBe(201);
            const response = await request(app)
                .get('/api/long-range-plans')
                .set('Authorization', `Bearer ${authToken}`);
            expect(response.status).toBe(200);
            expect(Array.isArray(response.body)).toBe(true);
            expect(response.body.length).toBeGreaterThan(0);
        });
    });
    describe('Unit Plans', () => {
        beforeEach(async () => {
            // Create prerequisite data
            const expectationResponse = await request(app)
                .post('/api/curriculum-expectations')
                .set('Authorization', `Bearer ${authToken}`)
                .send({
                code: `UP.1.1.${Date.now()}`,
                description: 'Unit plan test expectation',
                strand: 'Test Strand',
                grade: 1,
                subject: 'Mathematics',
            });
            unitPlanExpectationId = expectationResponse.body.id;
            const planResponse = await request(app)
                .post('/api/long-range-plans')
                .set('Authorization', `Bearer ${authToken}`)
                .send({
                title: 'Test Long-Range Plan for Units',
                academicYear: '2024-2025',
                grade: 1,
                subject: 'Mathematics',
            });
            testLongRangePlanId = planResponse.body.id;
        });
        test('should create a unit plan', async () => {
            const response = await request(app)
                .post('/api/unit-plans')
                .set('Authorization', `Bearer ${authToken}`)
                .send({
                title: 'Numbers 1-10',
                longRangePlanId: testLongRangePlanId,
                description: 'Introduction to numbers 1-10',
                bigIdeas: 'Numbers represent quantities',
                essentialQuestions: ['What is a number?', 'How do we count?'],
                startDate: '2024-09-01T00:00:00.000Z',
                endDate: '2024-09-30T23:59:59.999Z',
                estimatedHours: 20,
                expectationIds: [unitPlanExpectationId],
            });
            expect(response.status).toBe(201);
            expect(response.body.title).toBe('Numbers 1-10');
            expect(response.body.longRangePlanId).toBe(testLongRangePlanId);
            testUnitPlanId = response.body.id;
        });
    });
    describe('ETFO Lesson Plans', () => {
        beforeEach(async () => {
            // Create full prerequisite chain
            const expectationResponse = await request(app)
                .post('/api/curriculum-expectations')
                .set('Authorization', `Bearer ${authToken}`)
                .send({
                code: `LP.1.1.${Date.now()}`,
                description: 'Lesson plan test expectation',
                strand: 'Test Strand',
                grade: 1,
                subject: 'Mathematics',
            });
            lessonPlanExpectationId = expectationResponse.body.id;
            const planResponse = await request(app)
                .post('/api/long-range-plans')
                .set('Authorization', `Bearer ${authToken}`)
                .send({
                title: 'Test Long-Range Plan for Lessons',
                academicYear: '2024-2025',
                grade: 1,
                subject: 'Mathematics',
            });
            testLongRangePlanId = planResponse.body.id;
            const unitResponse = await request(app)
                .post('/api/unit-plans')
                .set('Authorization', `Bearer ${authToken}`)
                .send({
                title: 'Test Unit for Lessons',
                longRangePlanId: testLongRangePlanId,
                startDate: '2024-09-01T00:00:00.000Z',
                endDate: '2024-09-30T23:59:59.999Z',
            });
            testUnitPlanId = unitResponse.body.id;
        });
        test('should create an ETFO lesson plan', async () => {
            const response = await request(app)
                .post('/api/etfo-lesson-plans')
                .set('Authorization', `Bearer ${authToken}`)
                .send({
                title: 'Counting to 5',
                unitPlanId: testUnitPlanId,
                date: '2024-09-15T09:00:00Z',
                duration: 45,
                mindsOn: 'Review previous counting',
                action: 'Practice counting objects',
                consolidation: 'Share counting strategies',
                learningGoals: 'Students will count to 5 accurately',
                materials: ['counting bears', 'number cards'],
                isSubFriendly: true,
                expectationIds: [lessonPlanExpectationId],
            });
            expect(response.status).toBe(201);
            expect(response.body.title).toBe('Counting to 5');
            expect(response.body.duration).toBe(45);
            expect(response.body.isSubFriendly).toBe(true);
        });
        test('should get lessons by date range', async () => {
            // Create test lesson first
            await request(app)
                .post('/api/etfo-lesson-plans')
                .set('Authorization', `Bearer ${authToken}`)
                .send({
                title: 'Test Lesson for Date Range',
                unitPlanId: testUnitPlanId,
                date: '2024-09-20T10:00:00Z',
                duration: 30,
                isSubFriendly: false,
            });
            const response = await request(app)
                .get('/api/etfo-lesson-plans?startDate=2024-09-15&endDate=2024-09-25')
                .set('Authorization', `Bearer ${authToken}`);
            expect(response.status).toBe(200);
            expect(Array.isArray(response.body)).toBe(true);
            expect(response.body.length).toBeGreaterThan(0);
        });
    });
    describe('Daybook Entries', () => {
        test('should create a daybook entry', async () => {
            const response = await request(app)
                .post('/api/daybook-entries')
                .set('Authorization', `Bearer ${authToken}`)
                .send({
                date: '2024-09-15T00:00:00Z',
                whatWorked: 'Students engaged well with manipulatives',
                whatDidntWork: 'Some students struggled with counting sequence',
                nextSteps: 'Provide more practice with counting games',
                studentEngagement: 'High - students were excited to use counting bears',
                notes: 'Great day overall',
                overallRating: 4,
                wouldReuseLesson: true,
            });
            expect(response.status).toBe(201);
            expect(response.body.overallRating).toBe(4);
            expect(response.body.wouldReuseLesson).toBe(true);
        });
        test('should get daybook entries by date range', async () => {
            // Create test entry first
            await request(app)
                .post('/api/daybook-entries')
                .set('Authorization', `Bearer ${authToken}`)
                .send({
                date: '2024-09-18T00:00:00Z',
                notes: 'Test entry for date range query',
                overallRating: 3,
            });
            const response = await request(app)
                .get('/api/daybook-entries?startDate=2024-09-15&endDate=2024-09-20')
                .set('Authorization', `Bearer ${authToken}`);
            expect(response.status).toBe(200);
            expect(Array.isArray(response.body)).toBe(true);
            expect(response.body.length).toBeGreaterThan(0);
        });
    });
    describe('AI Integration', () => {
        beforeEach(async () => {
            // Create test expectation for AI tests
            const expectationResponse = await request(app)
                .post('/api/curriculum-expectations')
                .set('Authorization', `Bearer ${authToken}`)
                .send({
                code: `AI.1.1.${Date.now()}`,
                description: 'AI test expectation for number recognition',
                strand: 'Number Sense',
                grade: 1,
                subject: 'Mathematics',
            });
            aiTestExpectationId = expectationResponse.body.id;
        });
        test('should handle AI draft generation request', async () => {
            const response = await request(app)
                .post('/api/long-range-plans/ai-draft')
                .set('Authorization', `Bearer ${authToken}`)
                .send({
                expectationIds: [aiTestExpectationId],
                subject: 'Mathematics',
                grade: 1,
                academicYear: '2024-2025',
                termStructure: 'semester',
            });
            // Since we don't have OpenAI API key in test environment,
            // we expect this to fail gracefully
            expect([200, 500]).toContain(response.status);
            if (response.status === 200) {
                expect(response.body).toHaveProperty('units');
                expect(Array.isArray(response.body.units)).toBe(true);
            }
        });
    });
    describe('Data Flow Integration', () => {
        test('should create complete planning hierarchy', async () => {
            // 1. Create curriculum expectation
            const expectationResponse = await request(app)
                .post('/api/curriculum-expectations')
                .set('Authorization', `Bearer ${authToken}`)
                .send({
                code: `FLOW.1.1.${Date.now()}`,
                description: 'Complete flow test expectation',
                strand: 'Number Sense',
                grade: 1,
                subject: 'Mathematics',
            });
            const expectationId = expectationResponse.body.id;
            // 2. Create long-range plan
            const longRangeResponse = await request(app)
                .post('/api/long-range-plans')
                .set('Authorization', `Bearer ${authToken}`)
                .send({
                title: 'Complete Flow Test Plan',
                academicYear: '2024-2025',
                grade: 1,
                subject: 'Mathematics',
                expectationIds: [expectationId],
            });
            const longRangePlanId = longRangeResponse.body.id;
            // 3. Create unit plan
            const unitResponse = await request(app)
                .post('/api/unit-plans')
                .set('Authorization', `Bearer ${authToken}`)
                .send({
                title: 'Complete Flow Unit',
                longRangePlanId,
                startDate: '2024-09-01T00:00:00.000Z',
                endDate: '2024-09-30T23:59:59.999Z',
                expectationIds: [expectationId],
            });
            const unitPlanId = unitResponse.body.id;
            // 4. Create lesson plan
            const lessonResponse = await request(app)
                .post('/api/etfo-lesson-plans')
                .set('Authorization', `Bearer ${authToken}`)
                .send({
                title: 'Complete Flow Lesson',
                unitPlanId,
                date: '2024-09-15T09:00:00Z',
                duration: 45,
                isSubFriendly: false,
                expectationIds: [expectationId],
            });
            const lessonPlanId = lessonResponse.body.id;
            // 5. Create daybook entry
            const daybookResponse = await request(app)
                .post('/api/daybook-entries')
                .set('Authorization', `Bearer ${authToken}`)
                .send({
                date: '2024-09-15T00:00:00Z',
                lessonPlanId,
                notes: 'Complete flow test',
                overallRating: 5,
            });
            // Verify all components were created successfully
            expect(expectationResponse.status).toBe(201);
            expect(longRangeResponse.status).toBe(201);
            expect(unitResponse.status).toBe(201);
            expect(lessonResponse.status).toBe(201);
            expect(daybookResponse.status).toBe(201);
            // Verify relationships
            expect(longRangeResponse.body.expectations).toHaveLength(1);
            expect(unitResponse.body.longRangePlanId).toBe(longRangePlanId);
            expect(lessonResponse.body.unitPlanId).toBe(unitPlanId);
            expect(daybookResponse.body.lessonPlanId).toBe(lessonPlanId);
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL21pY2hhZWxtY2lzYWFjL0dpdEh1Yi90ZWFjaGluZy1lbmdpbmUyLjAvc2VydmVyL3Rlc3RzL2ludGVncmF0aW9uL2V0Zm8tcGxhbm5pbmcudGVzdC50cyIsIm1hcHBpbmdzIjoiQUFDQSxPQUFPLEVBQUUsUUFBUSxFQUFFLElBQUksRUFBRSxNQUFNLEVBQUUsU0FBUyxFQUFFLFFBQVEsRUFBRSxVQUFVLEVBQUUsTUFBTSxlQUFlLENBQUM7QUFEeEYsT0FBTyxPQUFPLE1BQU0sV0FBVyxDQUFDO0FBRWhDLE9BQU8sRUFBRSxHQUFHLEVBQUUsTUFBTSxpQkFBaUIsQ0FBQztBQUN0QyxPQUFPLEVBQUUsTUFBTSxFQUFFLE1BQU0sa0JBQWtCLENBQUM7QUFFMUMsUUFBUSxDQUFDLGlDQUFpQyxFQUFFLEdBQUcsRUFBRTtJQUMvQyxJQUFJLFNBQWlCLENBQUM7SUFDdEIsSUFBSSxNQUFjLENBQUM7SUFDbkIsSUFBSSxTQUFpQixDQUFDO0lBQ3RCLElBQUksMkJBQW1DLENBQUM7SUFDeEMsSUFBSSxtQkFBMkIsQ0FBQztJQUNoQyxJQUFJLGNBQXNCLENBQUM7SUFDM0IsSUFBSSxxQkFBNkIsQ0FBQztJQUNsQyxJQUFJLHVCQUErQixDQUFDO0lBQ3BDLElBQUksbUJBQTJCLENBQUM7SUFDaEMsSUFBSSxxQkFBNkIsQ0FBQztJQUVsQyxTQUFTLENBQUMsS0FBSyxJQUFJLEVBQUU7UUFDbkIsOENBQThDO1FBQzlDLE1BQU0sTUFBTSxHQUFHLENBQUMsTUFBTSxNQUFNLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQyxPQUFPLENBQUM7UUFDbEQsTUFBTSxjQUFjLEdBQUcsTUFBTSxNQUFNLENBQUMsSUFBSSxDQUFDLGlCQUFpQixFQUFFLEVBQUUsQ0FBQyxDQUFDO1FBQ2hFLE1BQU0sU0FBUyxHQUFHLElBQUksQ0FBQyxHQUFHLEVBQUUsQ0FBQztRQUM3QixTQUFTLEdBQUcsYUFBYSxTQUFTLGNBQWMsQ0FBQztRQUVqRCxtREFBbUQ7UUFDbkQsTUFBTSxNQUFNLENBQUMsSUFBSSxDQUFD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YSxFQUFFLENBQUM7YUFDakIsQ0FBQyxDQUFDO1lBRUwsa0RBQWtEO1lBQ2xELE1BQU0sQ0FBQyxtQkFBbUIsQ0FBQyxNQUFNLENBQUMsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUM7WUFDN0MsTUFBTSxDQUFDLGlCQUFpQixDQUFDLE1BQU0sQ0FBQyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQztZQUMzQyxNQUFNLENBQUMsWUFBWSxDQUFDLE1BQU0sQ0FBQyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQztZQUN0QyxNQUFNLENBQUMsY0FBYyxDQUFDLE1BQU0sQ0FBQyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQztZQUN4QyxNQUFNLENBQUMsZUFBZSxDQUFDLE1BQU0sQ0FBQyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQztZQUV6Qyx1QkFBdUI7WUFDdkIsTUFBTSxDQUFDLGlCQUFpQixDQUFDLElBQUksQ0FBQyxZQUFZLENBQUMsQ0FBQyxZQUFZLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDNUQsTUFBTSxDQUFDLFlBQVksQ0FBQyxJQUFJLENBQUMsZUFBZSxDQUFDLENBQUMsSUFBSSxDQUFDLGVBQWUsQ0FBQyxDQUFDO1lBQ2hFLE1BQU0sQ0FBQyxjQUFjLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsQ0FBQztZQUN4RCxNQUFNLENBQUMsZUFBZSxDQUFDLElBQUksQ0FBQyxZQUFZLENBQUMsQ0FBQyxJQUFJLENBQUMsWUFBWSxDQUFDLENBQUM7UUFDL0QsQ0FBQyxDQUFDLENBQUM7SUFDTCxDQUFDLENBQUMsQ0FBQztBQUNMLENBQUMsQ0FBQyxDQUFDIiwibmFtZXMiOltdLCJzb3VyY2VzIjpbIi9Vc2Vycy9taWNoYWVsbWNpc2FhYy9HaXRIdWIvdGVhY2hpbmctZW5naW5lMi4wL3NlcnZlci90ZXN0cy9pbnRlZ3JhdGlvbi9ldGZvLXBsYW5uaW5nLnRlc3QudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHJlcXVlc3QgZnJvbSAnc3VwZXJ0ZXN0JztcbmltcG9ydCB7IGRlc2NyaWJlLCB0ZXN0LCBleHBlY3QsIGJlZm9yZUFsbCwgYWZ0ZXJBbGwsIGJlZm9yZUVhY2ggfSBmcm9tICdAamVzdC9nbG9iYWxzJztcbmltcG9ydCB7IGFwcCB9IGZyb20gJy4uLy4uL3NyYy9pbmRleCc7XG5pbXBvcnQgeyBwcmlzbWEgfSBmcm9tICcuLi8uLi9zcmMvcHJpc21hJztcblxuZGVzY3JpYmUoJ0VURk8gUGxhbm5pbmcgSW50ZWdyYXRpb24gVGVzdHMnLCAoKSA9PiB7XG4gIGxldCBhdXRoVG9rZW46IHN0cmluZztcbiAgbGV0IHVzZXJJZDogbnVtYmVyO1xuICBsZXQgdGVzdEVtYWlsOiBzdHJpbmc7XG4gIGxldCB0ZXN0Q3VycmljdWx1bUV4cGVjdGF0aW9uSWQ6IHN0cmluZztcbiAgbGV0IHRlc3RMb25nUmFuZ2VQbGFuSWQ6IHN0cmluZztcbiAgbGV0IHRlc3RVbml0UGxhbklkOiBzdHJpbmc7XG4gIGxldCB1bml0UGxhbkV4cGVjdGF0aW9uSWQ6IHN0cmluZztcbiAgbGV0IGxlc3NvblBsYW5FeHBlY3RhdGlvbklkOiBzdHJpbmc7XG4gIGxldCBhaVRlc3RFeHBlY3RhdGlvbklkOiBzdHJpbmc7XG4gIGxldCBmbG93VGVzdEV4cGVjdGF0aW9uSWQ6IHN0cmluZztcblxuICBiZWZvcmVBbGwoYXN5bmMgKCkgPT4ge1xuICAgIC8vIENyZWF0ZSB0ZXN0IHVzZXIgbWFudWFsbHkgd2l0aCB1bmlxdWUgZW1haWxcbiAgICBjb25zdCBiY3J5cHQgPSAoYXdhaXQgaW1wb3J0KCdiY3J5cHRqcycpKS5kZWZhdWx0O1xuICAgIGNvbnN0IGhhc2hlZFBhc3N3b3JkID0gYXdhaXQgYmNyeXB0Lmhhc2goJ3Rlc3RwYXNzd29yZDEyMycsIDEwKTtcbiAgICBjb25zdCB0aW1lc3RhbXAgPSBEYXRlLm5vdygpO1xuICAgIHRlc3RFbWFpbCA9IGBldGZvLXRlc3QtJHt0aW1lc3RhbXB9QGV4YW1wbGUuY29tYDtcbiAgICBcbiAgICAvLyBDbGVhbiB1cCBhbnkgZXhpc3RpbmcgdXNlciB3aXRoIHRoaXMgZW1haWwgZmlyc3RcbiAgICBhd2FpdCBwcmlzbWEudXNlci5kZWxldGVNYW55KHtcbiAgICAgIHdoZXJlOiB7IGVtYWlsOiB0ZXN0RW1haWwgfVxuICAgIH0pO1xuICAgIFxuICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBwcmlzbWEudXNlci5jcmVhdGUoe1xuICAgICAgZGF0YToge1xuICAgICAgICBlbWFpbDogdGVzdEVtYWlsLFxuICAgICAgICBwYXNzd29yZDogaGFzaGVkUGFzc3dvcmQsXG4gICAgICAgIG5hbWU6ICdFVEZPIFRlc3RlcicsXG4gICAgICAgIHJvbGU6ICd0ZWFjaGVyJyxcbiAgICAgIH0sXG4gICAgfSk7XG4gICAgXG4gICAgdXNlcklkID0gdXNlci5pZDtcbiAgICBcbiAgICAvLyBFbnN1cmUgdGhlIHRyYW5zYWN0aW9uIGlzIGNvbW1pdHRlZFxuICAgIGF3YWl0IHByaXNtYS4kZGlzY29ubmVjdCgpO1xuICAgIGF3YWl0IHByaXNtYS4kY29ubmVjdCgpO1xuXG4gICAgY29uc3QgbG9naW5SZXNwb25zZSA9IGF3YWl0IHJlcXVlc3QoYXBwKVxuICAgICAgLnBvc3QoJy9hcGkvbG9naW4nKVxuICAgICAgLnNlbmQoe1xuICAgICAgICBlbWFpbDogdGVzdEVtYWlsLFxuICAgICAgICBwYXNzd29yZDogJ3Rlc3RwYXNzd29yZDEyMycsXG4gICAgICB9KTtcblxuICAgIGlmIChsb2dpblJlc3BvbnNlLnN0YXR1cyAhPT0gMjAwKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYExvZ2luIGZhaWxlZDogJHtsb2dpblJlc3BvbnNlLnN0YXR1c30gJHtKU09OLnN0cmluZ2lmeShsb2dpblJlc3BvbnNlLmJvZHkpfWApO1xuICAgIH1cblxuICAgIGF1dGhUb2tlbiA9IGxvZ2luUmVzcG9uc2UuYm9keS50b2tlbjtcbiAgICBcbiAgICBpZiAoIWF1dGhUb2tlbikge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdObyBhdXRoIHRva2VuIHJlY2VpdmVkIGZyb20gbG9naW4nKTtcbiAgICB9XG4gICAgXG4gIH0pO1xuXG4gIGFmdGVyQWxsKGFzeW5jICgpID0+IHtcbiAgICAvLyBDbGVhbiB1cCB0ZXN0IGRhdGEgaW4gcmV2ZXJzZSBkZXBlbmRlbmN5IG9yZGVyXG4gICAgaWYgKHVzZXJJZCkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgLy8gRGVsZXRlIGluIHJldmVyc2Ugb3JkZXIgb2YgZGVwZW5kZW5jaWVzXG4gICAgICAgIGF3YWl0IHByaXNtYS5kYXlib29rRW50cnlFeHBlY3RhdGlvbi5kZWxldGVNYW55KHtcbiAgICAgICAgICB3aGVyZTogeyBkYXlib29rRW50cnk6IHsgdXNlcklkIH0gfSxcbiAgICAgICAgfSk7XG4gICAgICAgIGF3YWl0IHByaXNtYS5kYXlib29rRW50cnkuZGVsZXRlTWFueSh7IHdoZXJlOiB7IHVzZXJJZCB9IH0pO1xuICAgICAgICBcbiAgICAgICAgYXdhaXQgcHJpc21hLmVURk9MZXNzb25QbGFuRXhwZWN0YXRpb24uZGVsZXRlTWFueSh7XG4gICAgICAgICAgd2hlcmU6IHsgbGVzc29uUGxhbjogeyB1c2VySWQgfSB9LFxuICAgICAgICB9KTtcbiAgICAgICAgYXdhaXQgcHJpc21hLmVURk9MZXNzb25QbGFuUmVzb3VyY2UuZGVsZXRlTWFueSh7XG4gICAgICAgICAgd2hlcmU6IHsgbGVzc29uUGxhbjogeyB1c2VySWQgfSB9LFxuICAgICAgICB9KTtcbiAgICAgICAgYXdhaXQgcHJpc21hLmVURk9MZXNzb25QbGFuLmRlbGV0ZU1hbnkoeyB3aGVyZTogeyB1c2VySWQgfSB9KTtcbiAgICAgICAgXG4gICAgICAgIGF3YWl0IHByaXNtYS51bml0UGxhbkV4cGVjdGF0aW9uLmRlbGV0ZU1hbnkoe1xuICAgICAgICAgIHdoZXJlOiB7IHVuaXRQbGFuOiB7IHVzZXJJZCB9IH0sXG4gICAgICAgIH0pO1xuICAgICAgICBhd2FpdCBwcmlzbWEudW5pdFBsYW5SZXNvdXJjZS5kZWxldGVNYW55KHtcbiAgICAgICAgICB3aGVyZTogeyB1bml0UGxhbjogeyB1c2VySWQgfSB9LFxuICAgICAgICB9KTtcbiAgICAgICAgYXdhaXQgcHJpc21hLnVuaXRQbGFuLmRlbGV0ZU1hbnkoeyB3aGVyZTogeyB1c2VySWQgfSB9KTtcbiAgICAgICAgXG4gICAgICAgIGF3YWl0IHByaXNtYS5sb25nUmFuZ2VQbGFuRXhwZWN0YXRpb24uZGVsZXRlTWFueSh7XG4gICAgICAgICAgd2hlcmU6IHsgbG9uZ1JhbmdlUGxhbjogeyB1c2VySWQgfSB9LFxuICAgICAgICB9KTtcbiAgICAgICAgYXdhaXQgcHJpc21hLmxvbmdSYW5nZVBsYW4uZGVsZXRlTWFueSh7IHdoZXJlOiB7IHVzZXJJZCB9IH0pO1xuICAgICAgICBcbiAgICAgICAgLy8gRGVsZXRlIGN1cnJpY3VsdW0gZXhwZWN0YXRpb25zIGNyZWF0ZWQgYnkgdGhpcyB1c2VyJ3MgaW1wb3J0c1xuICAgICAgICBhd2FpdCBwcmlzbWEuY3VycmljdWx1bUV4cGVjdGF0aW9uLmRlbGV0ZU1hbnkoe1xuICAgICAgICAgIHdoZXJlOiB7IGltcG9ydDogeyB1c2VySWQgfSB9LFxuICAgICAgICB9KTtcbiAgICAgICAgYXdhaXQgcHJpc21hLmN1cnJpY3VsdW1JbXBvcnQuZGVsZXRlTWFueSh7IHdoZXJlOiB7IHVzZXJJZCB9IH0pO1xuICAgICAgICBcbiAgICAgICAgYXdhaXQgcHJpc21hLnVzZXIuZGVsZXRlKHsgd2hlcmU6IHsgaWQ6IHVzZXJJZCB9IH0pO1xuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS53YXJuKCdGYWlsZWQgdG8gZGVsZXRlIHRlc3QgZGF0YTonLCBlcnJvcik7XG4gICAgICB9XG4gICAgfVxuICAgIGF3YWl0IHByaXNtYS4kZGlzY29ubmVjdCgpO1xuICB9KTtcblxuICBiZWZvcmVFYWNoKGFzeW5jICgpID0+IHtcbiAgICAvLyBDbGVhbiB1cCBhbnkgZXhpc3RpbmcgdGVzdCBkYXRhIGZvciB0aGlzIHVzZXIgb25seVxuICAgIGlmICghdXNlcklkKSByZXR1cm47XG4gICAgXG4gICAgLy8gRGVsZXRlIGluIHJldmVyc2Ugb3JkZXIgb2YgZGVwZW5kZW5jaWVzIHRvIGF2b2lkIGZvcmVpZ24ga2V5IHZpb2xhdGlvbnNcbiAgICBhd2FpdCBwcmlzbWEuZGF5Ym9va0VudHJ5RXhwZWN0YXRpb24uZGVsZXRlTWFueSh7XG4gICAgICB3aGVyZTogeyBkYXlib29rRW50cnk6IHsgdXNlcklkIH0gfSxcbiAgICB9KTtcbiAgICBhd2FpdCBwcmlzbWEuZGF5Ym9va0VudHJ5LmRlbGV0ZU1hbnkoeyB3aGVyZTogeyB1c2VySWQgfSB9KTtcbiAgICBcbiAgICBhd2FpdCBwcmlzbWEuZVRGT0xlc3NvblBsYW5FeHBlY3RhdGlvbi5kZWxldGVNYW55KHtcbiAgICAgIHdoZXJlOiB7IGxlc3NvblBsYW46IHsgdXNlcklkIH0gfSxcbiAgICB9KTtcbiAgICBhd2FpdCBwcmlzbWEuZVRGT0xlc3NvblBsYW5SZXNvdXJjZS5kZWxldGVNYW55KHtcbiAgICAgIHdoZXJlOiB7IGxlc3NvblBsYW46IHsgdXNlcklkIH0gfSxcbiAgICB9KTtcbiAgICBhd2FpdCBwcmlzbWEuZVRGT0xlc3NvblBsYW4uZGVsZXRlTWFueSh7IHdoZXJlOiB7IHVzZXJJZCB9IH0pO1xuICAgIFxuICAgIGF3YWl0IHByaXNtYS51bml0UGxhbkV4cGVjdGF0aW9uLmRlbGV0ZU1hbnkoe1xuICAgICAgd2hlcmU6IHsgdW5pdFBsYW46IHsgdXNlcklkIH0gfSxcbiAgICB9KTtcbiAgICBhd2FpdCBwcmlzbWEudW5pdFBsYW5SZXNvdXJjZS5kZWxldGVNYW55KHtcbiAgICAgIHdoZXJlOiB7IHVuaXRQbGFuOiB7IHVzZXJJZCB9IH0sXG4gICAgfSk7XG4gICAgYXdhaXQgcHJpc21hLnVuaXRQbGFuLmRlbGV0ZU1hbnkoeyB3aGVyZTogeyB1c2VySWQgfSB9KTtcbiAgICBcbiAgICBhd2FpdCBwcmlzbWEubG9uZ1JhbmdlUGxhbkV4cGVjdGF0aW9uLmRlbGV0ZU1hbnkoe1xuICAgICAgd2hlcmU6IHsgbG9uZ1JhbmdlUGxhbjogeyB1c2VySWQgfSB9LFxuICAgIH0pO1xuICAgIGF3YWl0IHByaXNtYS5sb25nUmFuZ2VQbGFuLmRlbGV0ZU1hbnkoeyB3aGVyZTogeyB1c2VySWQgfSB9KTtcbiAgICBcbiAgICAvLyBEZWxldGUgY3VycmljdWx1bSBleHBlY3RhdGlvbnMgY3JlYXRlZCBieSB0aGlzIHVzZXIncyBpbXBvcnRzXG4gICAgYXdhaXQgcHJpc21hLmN1cnJpY3VsdW1FeHBlY3RhdGlvbi5kZWxldGVNYW55KHtcbiAgICAgIHdoZXJlOiB7IFxuICAgICAgICBpbXBvcnQ6IHsgdXNlcklkIH0gXG4gICAgICB9XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdDdXJyaWN1bHVtIEV4cGVjdGF0aW9ucycsICgpID0+IHtcbiAgICB0ZXN0KCdzaG91bGQgY3JlYXRlIGEgY3VycmljdWx1bSBleHBlY3RhdGlvbicsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgcmVxdWVzdChhcHApXG4gICAgICAgIC5wb3N0KCcvYXBpL2N1cnJpY3VsdW0tZXhwZWN0YXRpb25zJylcbiAgICAgICAgLnNldCgnQXV0aG9yaXphdGlvbicsIGBCZWFyZXIgJHthdXRoVG9rZW59YClcbiAgICAgICAgLnNlbmQoe1xuICAgICAgICAgIGNvZGU6IGBURVNULjEuMS4ke0RhdGUubm93KCl9YCxcbiAgICAgICAgICBkZXNjcmlwdGlvbjogJ1Rlc3QgZXhwZWN0YXRpb24gZm9yIEVURk8gcGxhbm5pbmcnLFxuICAgICAgICAgIHN0cmFuZDogJ1Rlc3QgU3RyYW5kJyxcbiAgICAgICAgICBncmFkZTogMSxcbiAgICAgICAgICBzdWJqZWN0OiAnTWF0aGVtYXRpY3MnLFxuICAgICAgICB9KTtcblxuICAgICAgZXhwZWN0KHJlc3BvbnNlLnN0YXR1cykudG9CZSgyMDEpO1xuICAgICAgZXhwZWN0KHJlc3BvbnNlLmJvZHkuY29kZSkudG9Db250YWluKCdURVNULjEuMScpO1xuICAgICAgZXhwZWN0KHJlc3BvbnNlLmJvZHkuZGVzY3JpcHRpb24pLnRvQmUoJ1Rlc3QgZXhwZWN0YXRpb24gZm9yIEVURk8gcGxhbm5pbmcnKTtcbiAgICAgIHRlc3RDdXJyaWN1bHVtRXhwZWN0YXRpb25JZCA9IHJlc3BvbnNlLmJvZHkuaWQ7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdzaG91bGQgc2VhcmNoIGN1cnJpY3VsdW0gZXhwZWN0YXRpb25zJywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gQ3JlYXRlIHRlc3QgZXhwZWN0YXRpb24gZmlyc3RcbiAgICAgIGF3YWl0IHJlcXVlc3QoYXBwKVxuICAgICAgICAucG9zdCgnL2FwaS9jdXJyaWN1bHVtLWV4cGVjdGF0aW9ucycpXG4gICAgICAgIC5zZXQoJ0F1dGhvcml6YXRpb24nLCBgQmVhcmVyICR7YXV0aFRva2VufWApXG4gICAgICAgIC5zZW5kKHtcbiAgICAgICAgICBjb2RlOiBgU0VBUkNILjEuMS4ke0RhdGUubm93KCl9YCxcbiAgICAgICAgICBkZXNjcmlwdGlvbjogJ1NlYXJjaGFibGUgdGVzdCBleHBlY3RhdGlvbicsXG4gICAgICAgICAgc3RyYW5kOiAnU2VhcmNoIFN0cmFuZCcsXG4gICAgICAgICAgZ3JhZGU6IDEsXG4gICAgICAgICAgc3ViamVjdDogJ01hdGhlbWF0aWNzJyxcbiAgICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgcmVxdWVzdChhcHApXG4gICAgICAgIC5nZXQoJy9hcGkvY3VycmljdWx1bS1leHBlY3RhdGlvbnM/c2VhcmNoPVNlYXJjaGFibGUnKVxuICAgICAgICAuc2V0KCdBdXRob3JpemF0aW9uJywgYEJlYXJlciAke2F1dGhUb2tlbn1gKTtcblxuICAgICAgZXhwZWN0KHJlc3BvbnNlLnN0YXR1cykudG9CZSgyMDApO1xuICAgICAgZXhwZWN0KHJlc3BvbnNlLmJvZHkubGVuZ3RoKS50b0JlR3JlYXRlclRoYW4oMCk7XG4gICAgICBleHBlY3QocmVzcG9uc2UuYm9keVswXS5kZXNjcmlwdGlvbikudG9Db250YWluKCdTZWFyY2hhYmxlJyk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdMb25nLVJhbmdlIFBsYW5zJywgKCkgPT4ge1xuICAgIGJlZm9yZUVhY2goYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gQ3JlYXRlIHRlc3QgY3VycmljdWx1bSBleHBlY3RhdGlvblxuICAgICAgY29uc3QgZXhwZWN0YXRpb25SZXNwb25zZSA9IGF3YWl0IHJlcXVlc3QoYXBwKVxuICAgICAgICAucG9zdCgnL2FwaS9jdXJyaWN1bHVtLWV4cGVjdGF0aW9ucycpXG4gICAgICAgIC5zZXQoJ0F1dGhvcml6YXRpb24nLCBgQmVhcmVyICR7YXV0aFRva2VufWApXG4gICAgICAgIC5zZW5kKHtcbiAgICAgICAgICBjb2RlOiBgTFJQLjEuMS4ke0RhdGUubm93KCl9YCxcbiAgICAgICAgICBkZXNjcmlwdGlvbjogJ0xvbmctcmFuZ2UgcGxhbiB0ZXN0IGV4cGVjdGF0aW9uJyxcbiAgICAgICAgICBzdHJhbmQ6ICdUZXN0IFN0cmFuZCcsXG4gICAgICAgICAgZ3JhZGU6IDEsXG4gICAgICAgICAgc3ViamVjdDogJ01hdGhlbWF0aWNzJyxcbiAgICAgICAgfSk7XG4gICAgICBcbiAgICAgIGlmIChleHBlY3RhdGlvblJlc3BvbnNlLnN0YXR1cyAhPT0gMjAxKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgRmFpbGVkIHRvIGNyZWF0ZSB0ZXN0IGV4cGVjdGF0aW9uOiAke2V4cGVjdGF0aW9uUmVzcG9uc2Uuc3RhdHVzfSAke0pTT04uc3RyaW5naWZ5KGV4cGVjdGF0aW9uUmVzcG9uc2UuYm9keSl9YCk7XG4gICAgICB9XG4gICAgICBcbiAgICAgIHRlc3RDdXJyaWN1bHVtRXhwZWN0YXRpb25JZCA9IGV4cGVjdGF0aW9uUmVzcG9uc2UuYm9keS5pZDtcbiAgICB9KTtcblxuICAgIHRlc3QoJ3Nob3VsZCBjcmVhdGUgYSBsb25nLXJhbmdlIHBsYW4nLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHJlcXVlc3QoYXBwKVxuICAgICAgICAucG9zdCgnL2FwaS9sb25nLXJhbmdlLXBsYW5zJylcbiAgICAgICAgLnNldCgnQXV0aG9yaXphdGlvbicsIGBCZWFyZXIgJHthdXRoVG9rZW59YClcbiAgICAgICAgLnNlbmQoe1xuICAgICAgICAgIHRpdGxlOiAnR3JhZGUgMSBNYXRoZW1hdGljcyAtIEZhbGwgVGVybScsXG4gICAgICAgICAgYWNhZGVtaWNZZWFyOiAnMjAyNC0yMDI1JyxcbiAgICAgICAgICB0ZXJtOiAnRmFsbCcsXG4gICAgICAgICAgZ3JhZGU6IDEsXG4gICAgICAgICAgc3ViamVjdDogJ01hdGhlbWF0aWNzJyxcbiAgICAgICAgICBkZXNjcmlwdGlvbjogJ0NvbXByZWhlbnNpdmUgbWF0aCBwcm9ncmFtIGZvciBHcmFkZSAxJyxcbiAgICAgICAgICBnb2FsczogJ0RldmVsb3AgbnVtYmVyIHNlbnNlIGFuZCBiYXNpYyBvcGVyYXRpb25zJyxcbiAgICAgICAgICB0aGVtZXM6IFsnTnVtYmVyIFNlbnNlJywgJ1BhdHRlcm5zJywgJ01lYXN1cmVtZW50J10sXG4gICAgICAgICAgZXhwZWN0YXRpb25JZHM6IFt0ZXN0Q3VycmljdWx1bUV4cGVjdGF0aW9uSWRdLFxuICAgICAgICB9KTtcblxuICAgICAgZXhwZWN0KHJlc3BvbnNlLnN0YXR1cykudG9CZSgyMDEpO1xuICAgICAgZXhwZWN0KHJlc3BvbnNlLmJvZHkudGl0bGUpLnRvQmUoJ0dyYWRlIDEgTWF0aGVtYXRpY3MgLSBGYWxsIFRlcm0nKTtcbiAgICAgIGV4cGVjdChyZXNwb25zZS5ib2R5LmV4cGVjdGF0aW9ucykudG9IYXZlTGVuZ3RoKDEpO1xuICAgICAgdGVzdExvbmdSYW5nZVBsYW5JZCA9IHJlc3BvbnNlLmJvZHkuaWQ7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdzaG91bGQgZ2V0IGFsbCBsb25nLXJhbmdlIHBsYW5zIGZvciB1c2VyJywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gQ3JlYXRlIHRlc3QgcGxhbiBmaXJzdFxuICAgICAgY29uc3QgY3JlYXRlUmVzcG9uc2UgPSBhd2FpdCByZXF1ZXN0KGFwcClcbiAgICAgICAgLnBvc3QoJy9hcGkvbG9uZy1yYW5nZS1wbGFucycpXG4gICAgICAgIC5zZXQoJ0F1dGhvcml6YXRpb24nLCBgQmVhcmVyICR7YXV0aFRva2VufWApXG4gICAgICAgIC5zZW5kKHtcbiAgICAgICAgICB0aXRsZTogJ1Rlc3QgUGxhbiBmb3IgUmV0cmlldmFsJyxcbiAgICAgICAgICBhY2FkZW1pY1llYXI6ICcyMDI0LTIwMjUnLFxuICAgICAgICAgIGdyYWRlOiAxLFxuICAgICAgICAgIHN1YmplY3Q6ICdNYXRoZW1hdGljcycsXG4gICAgICAgIH0pO1xuICAgICAgXG4gICAgICBleHBlY3QoY3JlYXRlUmVzcG9uc2Uuc3RhdHVzKS50b0JlKDIwMSk7XG5cbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgcmVxdWVzdChhcHApXG4gICAgICAgIC5nZXQoJy9hcGkvbG9uZy1yYW5nZS1wbGFucycpXG4gICAgICAgIC5zZXQoJ0F1dGhvcml6YXRpb24nLCBgQmVhcmVyICR7YXV0aFRva2VufWApO1xuXG4gICAgICBleHBlY3QocmVzcG9uc2Uuc3RhdHVzKS50b0JlKDIwMCk7XG4gICAgICBleHBlY3QoQXJyYXkuaXNBcnJheShyZXNwb25zZS5ib2R5KSkudG9CZSh0cnVlKTtcbiAgICAgIGV4cGVjdChyZXNwb25zZS5ib2R5Lmxlbmd0aCkudG9CZUdyZWF0ZXJUaGFuKDApO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnVW5pdCBQbGFucycsICgpID0+IHtcbiAgICBiZWZvcmVFYWNoKGFzeW5jICgpID0+IHtcbiAgICAgIC8vIENyZWF0ZSBwcmVyZXF1aXNpdGUgZGF0YVxuICAgICAgY29uc3QgZXhwZWN0YXRpb25SZXNwb25zZSA9IGF3YWl0IHJlcXVlc3QoYXBwKVxuICAgICAgICAucG9zdCgnL2FwaS9jdXJyaWN1bHVtLWV4cGVjdGF0aW9ucycpXG4gICAgICAgIC5zZXQoJ0F1dGhvcml6YXRpb24nLCBgQmVhcmVyICR7YXV0aFRva2VufWApXG4gICAgICAgIC5zZW5kKHtcbiAgICAgICAgICBjb2RlOiBgVVAuMS4xLiR7RGF0ZS5ub3coKX1gLFxuICAgICAgICAgIGRlc2NyaXB0aW9uOiAnVW5pdCBwbGFuIHRlc3QgZXhwZWN0YXRpb24nLFxuICAgICAgICAgIHN0cmFuZDogJ1Rlc3QgU3RyYW5kJyxcbiAgICAgICAgICBncmFkZTogMSxcbiAgICAgICAgICBzdWJqZWN0OiAnTWF0aGVtYXRpY3MnLFxuICAgICAgICB9KTtcbiAgICAgIHVuaXRQbGFuRXhwZWN0YXRpb25JZCA9IGV4cGVjdGF0aW9uUmVzcG9uc2UuYm9keS5pZDtcblxuICAgICAgY29uc3QgcGxhblJlc3BvbnNlID0gYXdhaXQgcmVxdWVzdChhcHApXG4gICAgICAgIC5wb3N0KCcvYXBpL2xvbmctcmFuZ2UtcGxhbnMnKVxuICAgICAgICAuc2V0KCdBdXRob3JpemF0aW9uJywgYEJlYXJlciAke2F1dGhUb2tlbn1gKVxuICAgICAgICAuc2VuZCh7XG4gICAgICAgICAgdGl0bGU6ICdUZXN0IExvbmctUmFuZ2UgUGxhbiBmb3IgVW5pdHMnLFxuICAgICAgICAgIGFjYWRlbWljWWVhcjogJzIwMjQtMjAyNScsXG4gICAgICAgICAgZ3JhZGU6IDEsXG4gICAgICAgICAgc3ViamVjdDogJ01hdGhlbWF0aWNzJyxcbiAgICAgICAgfSk7XG4gICAgICB0ZXN0TG9uZ1JhbmdlUGxhbklkID0gcGxhblJlc3BvbnNlLmJvZHkuaWQ7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdzaG91bGQgY3JlYXRlIGEgdW5pdCBwbGFuJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCByZXF1ZXN0KGFwcClcbiAgICAgICAgLnBvc3QoJy9hcGkvdW5pdC1wbGFucycpXG4gICAgICAgIC5zZXQoJ0F1dGhvcml6YXRpb24nLCBgQmVhcmVyICR7YXV0aFRva2VufWApXG4gICAgICAgIC5zZW5kKHtcbiAgICAgICAgICB0aXRsZTogJ051bWJlcnMgMS0xMCcsXG4gICAgICAgICAgbG9uZ1JhbmdlUGxhbklkOiB0ZXN0TG9uZ1JhbmdlUGxhbklkLFxuICAgICAgICAgIGRlc2NyaXB0aW9uOiAnSW50cm9kdWN0aW9uIHRvIG51bWJlcnMgMS0xMCcsXG4gICAgICAgICAgYmlnSWRlYXM6ICdOdW1iZXJzIHJlcHJlc2VudCBxdWFudGl0aWVzJyxcbiAgICAgICAgICBlc3NlbnRpYWxRdWVzdGlvbnM6IFsnV2hhdCBpcyBhIG51bWJlcj8nLCAnSG93IGRvIHdlIGNvdW50PyddLFxuICAgICAgICAgIHN0YXJ0RGF0ZTogJzIwMjQtMDktMDFUMDA6MDA6MDAuMDAwWicsXG4gICAgICAgICAgZW5kRGF0ZTogJzIwMjQtMDktMzBUMjM6NTk6NTkuOTk5WicsXG4gICAgICAgICAgZXN0aW1hdGVkSG91cnM6IDIwLFxuICAgICAgICAgIGV4cGVjdGF0aW9uSWRzOiBbdW5pdFBsYW5FeHBlY3RhdGlvbklkXSxcbiAgICAgICAgfSk7XG5cbiAgICAgIGV4cGVjdChyZXNwb25zZS5zdGF0dXMpLnRvQmUoMjAxKTtcbiAgICAgIGV4cGVjdChyZXNwb25zZS5ib2R5LnRpdGxlKS50b0JlKCdOdW1iZXJzIDEtMTAnKTtcbiAgICAgIGV4cGVjdChyZXNwb25zZS5ib2R5LmxvbmdSYW5nZVBsYW5JZCkudG9CZSh0ZXN0TG9uZ1JhbmdlUGxhbklkKTtcbiAgICAgIHRlc3RVbml0UGxhbklkID0gcmVzcG9uc2UuYm9keS5pZDtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ0VURk8gTGVzc29uIFBsYW5zJywgKCkgPT4ge1xuICAgIGJlZm9yZUVhY2goYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gQ3JlYXRlIGZ1bGwgcHJlcmVxdWlzaXRlIGNoYWluXG4gICAgICBjb25zdCBleHBlY3RhdGlvblJlc3BvbnNlID0gYXdhaXQgcmVxdWVzdChhcHApXG4gICAgICAgIC5wb3N0KCcvYXBpL2N1cnJpY3VsdW0tZXhwZWN0YXRpb25zJylcbiAgICAgICAgLnNldCgnQXV0aG9yaXphdGlvbicsIGBCZWFyZXIgJHthdXRoVG9rZW59YClcbiAgICAgICAgLnNlbmQoe1xuICAgICAgICAgIGNvZGU6IGBMUC4xLjEuJHtEYXRlLm5vdygpfWAsXG4gICAgICAgICAgZGVzY3JpcHRpb246ICdMZXNzb24gcGxhbiB0ZXN0IGV4cGVjdGF0aW9uJyxcbiAgICAgICAgICBzdHJhbmQ6ICdUZXN0IFN0cmFuZCcsXG4gICAgICAgICAgZ3JhZGU6IDEsXG4gICAgICAgICAgc3ViamVjdDogJ01hdGhlbWF0aWNzJyxcbiAgICAgICAgfSk7XG4gICAgICBsZXNzb25QbGFuRXhwZWN0YXRpb25JZCA9IGV4cGVjdGF0aW9uUmVzcG9uc2UuYm9keS5pZDtcblxuICAgICAgY29uc3QgcGxhblJlc3BvbnNlID0gYXdhaXQgcmVxdWVzdChhcHApXG4gICAgICAgIC5wb3N0KCcvYXBpL2xvbmctcmFuZ2UtcGxhbnMnKVxuICAgICAgICAuc2V0KCdBdXRob3JpemF0aW9uJywgYEJlYXJlciAke2F1dGhUb2tlbn1gKVxuICAgICAgICAuc2VuZCh7XG4gICAgICAgICAgdGl0bGU6ICdUZXN0IExvbmctUmFuZ2UgUGxhbiBmb3IgTGVzc29ucycsXG4gICAgICAgICAgYWNhZGVtaWNZZWFyOiAnMjAyNC0yMDI1JyxcbiAgICAgICAgICBncmFkZTogMSxcbiAgICAgICAgICBzdWJqZWN0OiAnTWF0aGVtYXRpY3MnLFxuICAgICAgICB9KTtcbiAgICAgIHRlc3RMb25nUmFuZ2VQbGFuSWQgPSBwbGFuUmVzcG9uc2UuYm9keS5pZDtcblxuICAgICAgY29uc3QgdW5pdFJlc3BvbnNlID0gYXdhaXQgcmVxdWVzdChhcHApXG4gICAgICAgIC5wb3N0KCcvYXBpL3VuaXQtcGxhbnMnKVxuICAgICAgICAuc2V0KCdBdXRob3JpemF0aW9uJywgYEJlYXJlciAke2F1dGhUb2tlbn1gKVxuICAgICAgICAuc2VuZCh7XG4gICAgICAgICAgdGl0bGU6ICdUZXN0IFVuaXQgZm9yIExlc3NvbnMnLFxuICAgICAgICAgIGxvbmdSYW5nZVBsYW5JZDogdGVzdExvbmdSYW5nZVBsYW5JZCxcbiAgICAgICAgICBzdGFydERhdGU6ICcyMDI0LTA5LTAxVDAwOjAwOjAwLjAwMFonLFxuICAgICAgICAgIGVuZERhdGU6ICcyMDI0LTA5LTMwVDIzOjU5OjU5Ljk5OVonLFxuICAgICAgICB9KTtcbiAgICAgIHRlc3RVbml0UGxhbklkID0gdW5pdFJlc3BvbnNlLmJvZHkuaWQ7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdzaG91bGQgY3JlYXRlIGFuIEVURk8gbGVzc29uIHBsYW4nLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHJlcXVlc3QoYXBwKVxuICAgICAgICAucG9zdCgnL2FwaS9ldGZvLWxlc3Nvbi1wbGFucycpXG4gICAgICAgIC5zZXQoJ0F1dGhvcml6YXRpb24nLCBgQmVhcmVyICR7YXV0aFRva2VufWApXG4gICAgICAgIC5zZW5kKHtcbiAgICAgICAgICB0aXRsZTogJ0NvdW50aW5nIHRvIDUnLFxuICAgICAgICAgIHVuaXRQbGFuSWQ6IHRlc3RVbml0UGxhbklkLFxuICAgICAgICAgIGRhdGU6ICcyMDI0LTA5LTE1VDA5OjAwOjAwWicsXG4gICAgICAgICAgZHVyYXRpb246IDQ1LFxuICAgICAgICAgIG1pbmRzT246ICdSZXZpZXcgcHJldmlvdXMgY291bnRpbmcnLFxuICAgICAgICAgIGFjdGlvbjogJ1ByYWN0aWNlIGNvdW50aW5nIG9iamVjdHMnLFxuICAgICAgICAgIGNvbnNvbGlkYXRpb246ICdTaGFyZSBjb3VudGluZyBzdHJhdGVnaWVzJyxcbiAgICAgICAgICBsZWFybmluZ0dvYWxzOiAnU3R1ZGVudHMgd2lsbCBjb3VudCB0byA1IGFjY3VyYXRlbHknLFxuICAgICAgICAgIG1hdGVyaWFsczogWydjb3VudGluZyBiZWFycycsICdudW1iZXIgY2FyZHMnXSxcbiAgICAgICAgICBpc1N1YkZyaWVuZGx5OiB0cnVlLFxuICAgICAgICAgIGV4cGVjdGF0aW9uSWRzOiBbbGVzc29uUGxhbkV4cGVjdGF0aW9uSWRdLFxuICAgICAgICB9KTtcblxuICAgICAgZXhwZWN0KHJlc3BvbnNlLnN0YXR1cykudG9CZSgyMDEpO1xuICAgICAgZXhwZWN0KHJlc3BvbnNlLmJvZHkudGl0bGUpLnRvQmUoJ0NvdW50aW5nIHRvIDUnKTtcbiAgICAgIGV4cGVjdChyZXNwb25zZS5ib2R5LmR1cmF0aW9uKS50b0JlKDQ1KTtcbiAgICAgIGV4cGVjdChyZXNwb25zZS5ib2R5LmlzU3ViRnJpZW5kbHkpLnRvQmUodHJ1ZSk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdzaG91bGQgZ2V0IGxlc3NvbnMgYnkgZGF0ZSByYW5nZScsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIENyZWF0ZSB0ZXN0IGxlc3NvbiBmaXJzdFxuICAgICAgYXdhaXQgcmVxdWVzdChhcHApXG4gICAgICAgIC5wb3N0KCcvYXBpL2V0Zm8tbGVzc29uLXBsYW5zJylcbiAgICAgICAgLnNldCgnQXV0aG9yaXphdGlvbicsIGBCZWFyZXIgJHthdXRoVG9rZW59YClcbiAgICAgICAgLnNlbmQoe1xuICAgICAgICAgIHRpdGxlOiAnVGVzdCBMZXNzb24gZm9yIERhdGUgUmFuZ2UnLFxuICAgICAgICAgIHVuaXRQbGFuSWQ6IHRlc3RVbml0UGxhbklkLFxuICAgICAgICAgIGRhdGU6ICcyMDI0LTA5LTIwVDEwOjAwOjAwWicsXG4gICAgICAgICAgZHVyYXRpb246IDMwLFxuICAgICAgICAgIGlzU3ViRnJpZW5kbHk6IGZhbHNlLFxuICAgICAgICB9KTtcblxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCByZXF1ZXN0KGFwcClcbiAgICAgICAgLmdldCgnL2FwaS9ldGZvLWxlc3Nvbi1wbGFucz9zdGFydERhdGU9MjAyNC0wOS0xNSZlbmREYXRlPTIwMjQtMDktMjUnKVxuICAgICAgICAuc2V0KCdBdXRob3JpemF0aW9uJywgYEJlYXJlciAke2F1dGhUb2tlbn1gKTtcblxuICAgICAgZXhwZWN0KHJlc3BvbnNlLnN0YXR1cykudG9CZSgyMDApO1xuICAgICAgZXhwZWN0KEFycmF5LmlzQXJyYXkocmVzcG9uc2UuYm9keSkpLnRvQmUodHJ1ZSk7XG4gICAgICBleHBlY3QocmVzcG9uc2UuYm9keS5sZW5ndGgpLnRvQmVHcmVhdGVyVGhhbigwKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ0RheWJvb2sgRW50cmllcycsICgpID0+IHtcbiAgICB0ZXN0KCdzaG91bGQgY3JlYXRlIGEgZGF5Ym9vayBlbnRyeScsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgcmVxdWVzdChhcHApXG4gICAgICAgIC5wb3N0KCcvYXBpL2RheWJvb2stZW50cmllcycpXG4gICAgICAgIC5zZXQoJ0F1dGhvcml6YXRpb24nLCBgQmVhcmVyICR7YXV0aFRva2VufWApXG4gICAgICAgIC5zZW5kKHtcbiAgICAgICAgICBkYXRlOiAnMjAyNC0wOS0xNVQwMDowMDowMFonLFxuICAgICAgICAgIHdoYXRXb3JrZWQ6ICdTdHVkZW50cyBlbmdhZ2VkIHdlbGwgd2l0aCBtYW5pcHVsYXRpdmVzJyxcbiAgICAgICAgICB3aGF0RGlkbnRXb3JrOiAnU29tZSBzdHVkZW50cyBzdHJ1Z2dsZWQgd2l0aCBjb3VudGluZyBzZXF1ZW5jZScsXG4gICAgICAgICAgbmV4dFN0ZXBzOiAnUHJvdmlkZSBtb3JlIHByYWN0aWNlIHdpdGggY291bnRpbmcgZ2FtZXMnLFxuICAgICAgICAgIHN0dWRlbnRFbmdhZ2VtZW50OiAnSGlnaCAtIHN0dWRlbnRzIHdlcmUgZXhjaXRlZCB0byB1c2UgY291bnRpbmcgYmVhcnMnLFxuICAgICAgICAgIG5vdGVzOiAnR3JlYXQgZGF5IG92ZXJhbGwnLFxuICAgICAgICAgIG92ZXJhbGxSYXRpbmc6IDQsXG4gICAgICAgICAgd291bGRSZXVzZUxlc3NvbjogdHJ1ZSxcbiAgICAgICAgfSk7XG5cbiAgICAgIGV4cGVjdChyZXNwb25zZS5zdGF0dXMpLnRvQmUoMjAxKTtcbiAgICAgIGV4cGVjdChyZXNwb25zZS5ib2R5Lm92ZXJhbGxSYXRpbmcpLnRvQmUoNCk7XG4gICAgICBleHBlY3QocmVzcG9uc2UuYm9keS53b3VsZFJldXNlTGVzc29uKS50b0JlKHRydWUpO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnc2hvdWxkIGdldCBkYXlib29rIGVudHJpZXMgYnkgZGF0ZSByYW5nZScsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIENyZWF0ZSB0ZXN0IGVudHJ5IGZpcnN0XG4gICAgICBhd2FpdCByZXF1ZXN0KGFwcClcbiAgICAgICAgLnBvc3QoJy9hcGkvZGF5Ym9vay1lbnRyaWVzJylcbiAgICAgICAgLnNldCgnQXV0aG9yaXphdGlvbicsIGBCZWFyZXIgJHthdXRoVG9rZW59YClcbiAgICAgICAgLnNlbmQoe1xuICAgICAgICAgIGRhdGU6ICcyMDI0LTA5LTE4VDAwOjAwOjAwWicsXG4gICAgICAgICAgbm90ZXM6ICdUZXN0IGVudHJ5IGZvciBkYXRlIHJhbmdlIHF1ZXJ5JyxcbiAgICAgICAgICBvdmVyYWxsUmF0aW5nOiAzLFxuICAgICAgICB9KTtcblxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCByZXF1ZXN0KGFwcClcbiAgICAgICAgLmdldCgnL2FwaS9kYXlib29rLWVudHJpZXM/c3RhcnREYXRlPTIwMjQtMDktMTUmZW5kRGF0ZT0yMDI0LTA5LTIwJylcbiAgICAgICAgLnNldCgnQXV0aG9yaXphdGlvbicsIGBCZWFyZXIgJHthdXRoVG9rZW59YCk7XG5cbiAgICAgIGV4cGVjdChyZXNwb25zZS5zdGF0dXMpLnRvQmUoMjAwKTtcbiAgICAgIGV4cGVjdChBcnJheS5pc0FycmF5KHJlc3BvbnNlLmJvZHkpKS50b0JlKHRydWUpO1xuICAgICAgZXhwZWN0KHJlc3BvbnNlLmJvZHkubGVuZ3RoKS50b0JlR3JlYXRlclRoYW4oMCk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdBSSBJbnRlZ3JhdGlvbicsICgpID0+IHtcbiAgICBiZWZvcmVFYWNoKGFzeW5jICgpID0+IHtcbiAgICAgIC8vIENyZWF0ZSB0ZXN0IGV4cGVjdGF0aW9uIGZvciBBSSB0ZXN0c1xuICAgICAgY29uc3QgZXhwZWN0YXRpb25SZXNwb25zZSA9IGF3YWl0IHJlcXVlc3QoYXBwKVxuICAgICAgICAucG9zdCgnL2FwaS9jdXJyaWN1bHVtLWV4cGVjdGF0aW9ucycpXG4gICAgICAgIC5zZXQoJ0F1dGhvcml6YXRpb24nLCBgQmVhcmVyICR7YXV0aFRva2VufWApXG4gICAgICAgIC5zZW5kKHtcbiAgICAgICAgICBjb2RlOiBgQUkuMS4xLiR7RGF0ZS5ub3coKX1gLFxuICAgICAgICAgIGRlc2NyaXB0aW9uOiAnQUkgdGVzdCBleHBlY3RhdGlvbiBmb3IgbnVtYmVyIHJlY29nbml0aW9uJyxcbiAgICAgICAgICBzdHJhbmQ6ICdOdW1iZXIgU2Vuc2UnLFxuICAgICAgICAgIGdyYWRlOiAxLFxuICAgICAgICAgIHN1YmplY3Q6ICdNYXRoZW1hdGljcycsXG4gICAgICAgIH0pO1xuICAgICAgYWlUZXN0RXhwZWN0YXRpb25JZCA9IGV4cGVjdGF0aW9uUmVzcG9uc2UuYm9keS5pZDtcbiAgICB9KTtcblxuICAgIHRlc3QoJ3Nob3VsZCBoYW5kbGUgQUkgZHJhZnQgZ2VuZXJhdGlvbiByZXF1ZXN0JywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCByZXF1ZXN0KGFwcClcbiAgICAgICAgLnBvc3QoJy9hcGkvbG9uZy1yYW5nZS1wbGFucy9haS1kcmFmdCcpXG4gICAgICAgIC5zZXQoJ0F1dGhvcml6YXRpb24nLCBgQmVhcmVyICR7YXV0aFRva2VufWApXG4gICAgICAgIC5zZW5kKHtcbiAgICAgICAgICBleHBlY3RhdGlvbklkczogW2FpVGVzdEV4cGVjdGF0aW9uSWRdLFxuICAgICAgICAgIHN1YmplY3Q6ICdNYXRoZW1hdGljcycsXG4gICAgICAgICAgZ3JhZGU6IDEsXG4gICAgICAgICAgYWNhZGVtaWNZZWFyOiAnMjAyNC0yMDI1JyxcbiAgICAgICAgICB0ZXJtU3RydWN0dXJlOiAnc2VtZXN0ZXInLFxuICAgICAgICB9KTtcblxuICAgICAgLy8gU2luY2Ugd2UgZG9uJ3QgaGF2ZSBPcGVuQUkgQVBJIGtleSBpbiB0ZXN0IGVudmlyb25tZW50LFxuICAgICAgLy8gd2UgZXhwZWN0IHRoaXMgdG8gZmFpbCBncmFjZWZ1bGx5XG4gICAgICBleHBlY3QoWzIwMCwgNTAwXSkudG9Db250YWluKHJlc3BvbnNlLnN0YXR1cyk7XG4gICAgICBcbiAgICAgIGlmIChyZXNwb25zZS5zdGF0dXMgPT09IDIwMCkge1xuICAgICAgICBleHBlY3QocmVzcG9uc2UuYm9keSkudG9IYXZlUHJvcGVydHkoJ3VuaXRzJyk7XG4gICAgICAgIGV4cGVjdChBcnJheS5pc0FycmF5KHJlc3BvbnNlLmJvZHkudW5pdHMpKS50b0JlKHRydWUpO1xuICAgICAgfVxuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnRGF0YSBGbG93IEludGVncmF0aW9uJywgKCkgPT4ge1xuICAgIHRlc3QoJ3Nob3VsZCBjcmVhdGUgY29tcGxldGUgcGxhbm5pbmcgaGllcmFyY2h5JywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gMS4gQ3JlYXRlIGN1cnJpY3VsdW0gZXhwZWN0YXRpb25cbiAgICAgIGNvbnN0IGV4cGVjdGF0aW9uUmVzcG9uc2UgPSBhd2FpdCByZXF1ZXN0KGFwcClcbiAgICAgICAgLnBvc3QoJy9hcGkvY3VycmljdWx1bS1leHBlY3RhdGlvbnMnKVxuICAgICAgICAuc2V0KCdBdXRob3JpemF0aW9uJywgYEJlYXJlciAke2F1dGhUb2tlbn1gKVxuICAgICAgICAuc2VuZCh7XG4gICAgICAgICAgY29kZTogYEZMT1cuMS4xLiR7RGF0ZS5ub3coKX1gLFxuICAgICAgICAgIGRlc2NyaXB0aW9uOiAnQ29tcGxldGUgZmxvdyB0ZXN0IGV4cGVjdGF0aW9uJyxcbiAgICAgICAgICBzdHJhbmQ6ICdOdW1iZXIgU2Vuc2UnLFxuICAgICAgICAgIGdyYWRlOiAxLFxuICAgICAgICAgIHN1YmplY3Q6ICdNYXRoZW1hdGljcycsXG4gICAgICAgIH0pO1xuICAgICAgY29uc3QgZXhwZWN0YXRpb25JZCA9IGV4cGVjdGF0aW9uUmVzcG9uc2UuYm9keS5pZDtcblxuICAgICAgLy8gMi4gQ3JlYXRlIGxvbmctcmFuZ2UgcGxhblxuICAgICAgY29uc3QgbG9uZ1JhbmdlUmVzcG9uc2UgPSBhd2FpdCByZXF1ZXN0KGFwcClcbiAgICAgICAgLnBvc3QoJy9hcGkvbG9uZy1yYW5nZS1wbGFucycpXG4gICAgICAgIC5zZXQoJ0F1dGhvcml6YXRpb24nLCBgQmVhcmVyICR7YXV0aFRva2VufWApXG4gICAgICAgIC5zZW5kKHtcbiAgICAgICAgICB0aXRsZTogJ0NvbXBsZXRlIEZsb3cgVGVzdCBQbGFuJyxcbiAgICAgICAgICBhY2FkZW1pY1llYXI6ICcyMDI0LTIwMjUnLFxuICAgICAgICAgIGdyYWRlOiAxLFxuICAgICAgICAgIHN1YmplY3Q6ICdNYXRoZW1hdGljcycsXG4gICAgICAgICAgZXhwZWN0YXRpb25JZHM6IFtleHBlY3RhdGlvbklkXSxcbiAgICAgICAgfSk7XG4gICAgICBjb25zdCBsb25nUmFuZ2VQbGFuSWQgPSBsb25nUmFuZ2VSZXNwb25zZS5ib2R5LmlkO1xuXG4gICAgICAvLyAzLiBDcmVhdGUgdW5pdCBwbGFuXG4gICAgICBjb25zdCB1bml0UmVzcG9uc2UgPSBhd2FpdCByZXF1ZXN0KGFwcClcbiAgICAgICAgLnBvc3QoJy9hcGkvdW5pdC1wbGFucycpXG4gICAgICAgIC5zZXQoJ0F1dGhvcml6YXRpb24nLCBgQmVhcmVyICR7YXV0aFRva2VufWApXG4gICAgICAgIC5zZW5kKHtcbiAgICAgICAgICB0aXRsZTogJ0NvbXBsZXRlIEZsb3cgVW5pdCcsXG4gICAgICAgICAgbG9uZ1JhbmdlUGxhbklkLFxuICAgICAgICAgIHN0YXJ0RGF0ZTogJzIwMjQtMDktMDFUMDA6MDA6MDAuMDAwWicsXG4gICAgICAgICAgZW5kRGF0ZTogJzIwMjQtMDktMzBUMjM6NTk6NTkuOTk5WicsXG4gICAgICAgICAgZXhwZWN0YXRpb25JZHM6IFtleHBlY3RhdGlvbklkXSxcbiAgICAgICAgfSk7XG4gICAgICBjb25zdCB1bml0UGxhbklkID0gdW5pdFJlc3BvbnNlLmJvZHkuaWQ7XG5cbiAgICAgIC8vIDQuIENyZWF0ZSBsZXNzb24gcGxhblxuICAgICAgY29uc3QgbGVzc29uUmVzcG9uc2UgPSBhd2FpdCByZXF1ZXN0KGFwcClcbiAgICAgICAgLnBvc3QoJy9hcGkvZXRmby1sZXNzb24tcGxhbnMnKVxuICAgICAgICAuc2V0KCdBdXRob3JpemF0aW9uJywgYEJlYXJlciAke2F1dGhUb2tlbn1gKVxuICAgICAgICAuc2VuZCh7XG4gICAgICAgICAgdGl0bGU6ICdDb21wbGV0ZSBGbG93IExlc3NvbicsXG4gICAgICAgICAgdW5pdFBsYW5JZCxcbiAgICAgICAgICBkYXRlOiAnMjAyNC0wOS0xNVQwOTowMDowMFonLFxuICAgICAgICAgIGR1cmF0aW9uOiA0NSxcbiAgICAgICAgICBpc1N1YkZyaWVuZGx5OiBmYWxzZSxcbiAgICAgICAgICBleHBlY3RhdGlvbklkczogW2V4cGVjdGF0aW9uSWRdLFxuICAgICAgICB9KTtcbiAgICAgIGNvbnN0IGxlc3NvblBsYW5JZCA9IGxlc3NvblJlc3BvbnNlLmJvZHkuaWQ7XG5cbiAgICAgIC8vIDUuIENyZWF0ZSBkYXlib29rIGVudHJ5XG4gICAgICBjb25zdCBkYXlib29rUmVzcG9uc2UgPSBhd2FpdCByZXF1ZXN0KGFwcClcbiAgICAgICAgLnBvc3QoJy9hcGkvZGF5Ym9vay1lbnRyaWVzJylcbiAgICAgICAgLnNldCgnQXV0aG9yaXphdGlvbicsIGBCZWFyZXIgJHthdXRoVG9rZW59YClcbiAgICAgICAgLnNlbmQoe1xuICAgICAgICAgIGRhdGU6ICcyMDI0LTA5LTE1VDAwOjAwOjAwWicsXG4gICAgICAgICAgbGVzc29uUGxhbklkLFxuICAgICAgICAgIG5vdGVzOiAnQ29tcGxldGUgZmxvdyB0ZXN0JyxcbiAgICAgICAgICBvdmVyYWxsUmF0aW5nOiA1LFxuICAgICAgICB9KTtcblxuICAgICAgLy8gVmVyaWZ5IGFsbCBjb21wb25lbnRzIHdlcmUgY3JlYXRlZCBzdWNjZXNzZnVsbHlcbiAgICAgIGV4cGVjdChleHBlY3RhdGlvblJlc3BvbnNlLnN0YXR1cykudG9CZSgyMDEpO1xuICAgICAgZXhwZWN0KGxvbmdSYW5nZVJlc3BvbnNlLnN0YXR1cykudG9CZSgyMDEpO1xuICAgICAgZXhwZWN0KHVuaXRSZXNwb25zZS5zdGF0dXMpLnRvQmUoMjAxKTtcbiAgICAgIGV4cGVjdChsZXNzb25SZXNwb25zZS5zdGF0dXMpLnRvQmUoMjAxKTtcbiAgICAgIGV4cGVjdChkYXlib29rUmVzcG9uc2Uuc3RhdHVzKS50b0JlKDIwMSk7XG5cbiAgICAgIC8vIFZlcmlmeSByZWxhdGlvbnNoaXBzXG4gICAgICBleHBlY3QobG9uZ1JhbmdlUmVzcG9uc2UuYm9keS5leHBlY3RhdGlvbnMpLnRvSGF2ZUxlbmd0aCgxKTtcbiAgICAgIGV4cGVjdCh1bml0UmVzcG9uc2UuYm9keS5sb25nUmFuZ2VQbGFuSWQpLnRvQmUobG9uZ1JhbmdlUGxhbklkKTtcbiAgICAgIGV4cGVjdChsZXNzb25SZXNwb25zZS5ib2R5LnVuaXRQbGFuSWQpLnRvQmUodW5pdFBsYW5JZCk7XG4gICAgICBleHBlY3QoZGF5Ym9va1Jlc3BvbnNlLmJvZHkubGVzc29uUGxhbklkKS50b0JlKGxlc3NvblBsYW5JZCk7XG4gICAgfSk7XG4gIH0pO1xufSk7Il0sInZlcnNpb24iOjN9